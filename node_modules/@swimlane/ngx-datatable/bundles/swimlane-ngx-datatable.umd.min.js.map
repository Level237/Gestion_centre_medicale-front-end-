{"version":3,"sources":["../../projects/swimlane/ngx-datatable/src/lib/services/scrollbar-helper.service.ts","../../projects/swimlane/ngx-datatable/src/lib/services/dimensions-helper.service.ts","../../projects/swimlane/ngx-datatable/src/lib/services/column-changes.service.ts","../projects/swimlane/ngx-datatable/src/lib/components/footer/footer-template.directive.ts","../../projects/swimlane/ngx-datatable/src/lib/directives/visibility.directive.ts","../../projects/swimlane/ngx-datatable/src/lib/directives/draggable.directive.ts","../../projects/swimlane/ngx-datatable/src/lib/directives/resizeable.directive.ts","../../../../node_modules/tslib/tslib.es6.js","../../projects/swimlane/ngx-datatable/src/lib/directives/orderable.directive.ts","../../projects/swimlane/ngx-datatable/src/lib/directives/long-press.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/scroller.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/body-group-header-template.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/body-group-header.directive.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/column-prop-getters.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/tree.ts","../../projects/swimlane/ngx-datatable/src/lib/types/column-mode.type.ts","../../projects/swimlane/ngx-datatable/src/lib/types/selection.type.ts","../../projects/swimlane/ngx-datatable/src/lib/types/sort.type.ts","../../projects/swimlane/ngx-datatable/src/lib/types/contextmenu.type.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/camel-case.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/id.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/column-helper.ts","../projects/swimlane/ngx-datatable/src/lib/components/columns/column-header.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/columns/column-cell.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/columns/tree.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/columns/column.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/row-detail/row-detail-template.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/row-detail/row-detail.directive.ts","../projects/swimlane/ngx-datatable/src/lib/components/footer/footer.directive.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/column.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/row-height-cache.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/prefixes.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/translate.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/body.component.ts","../../projects/swimlane/ngx-datatable/src/lib/types/sort-direction.type.ts","../projects/swimlane/ngx-datatable/src/lib/components/header/header.component.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/throttle.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/math.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/sort.ts","../../projects/swimlane/ngx-datatable/src/lib/components/datatable.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/header/header-cell.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/footer/footer.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/footer/pager.component.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/keys.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/progress-bar.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/body-row.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/body-row-wrapper.component.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/body-cell.component.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/selection.ts","../projects/swimlane/ngx-datatable/src/lib/components/body/selection.component.ts","../esm2015/projects/swimlane/ngx-datatable/src/lib/components/body/summary/summary-row.component.ts","../../projects/swimlane/ngx-datatable/src/lib/types/click.type.ts","../../../projects/swimlane/ngx-datatable/src/lib/ngx-datatable.module.ts","../../projects/swimlane/ngx-datatable/src/lib/utils/elm-from-point.ts"],"names":["ScrollbarHelper","document","this","width","getWidth","prototype","outer","createElement","style","visibility","msOverflowStyle","body","appendChild","widthNoScroll","offsetWidth","overflow","inner","widthWithScroll","parentNode","removeChild","Injectable","Inject","args","DOCUMENT","DimensionsHelper","getDimensions","element","getBoundingClientRect","ColumnChangesService","columnInputChanges","Subject","Object","defineProperty","asObservable","onInputChange","next","template","Directive","selector","TemplateRef","VisibilityDirective","zone","isVisible","visible","EventEmitter","ngOnInit","runCheck","ngOnDestroy","clearTimeout","timeout","onVisibilityChange","_this","run","emit","check","_a","nativeElement","offsetHeight","runOutsideAngular","setTimeout","ElementRef","NgZone","HostBinding","Output","DraggableDirective","dragX","dragY","dragStart","dragging","dragEnd","isDragging","ngOnChanges","changes","currentValue","dragModel","onMousedown","_destroySubscription","onMouseup","event","classList","remove","subscription","model","target","contains","preventDefault","mouseDownPos_1","x","clientX","y","clientY","mouseup","fromEvent","subscribe","ev","mouseMoveSub","pipe","takeUntil","move","add","mouseDownPos","left","top","unsubscribe","undefined","Input","ResizeableDirective","renderer","resizeEnabled","resize","resizing","ngAfterViewInit","renderer2","resizeHandle","addClass","destroyNode","closed","clientWidth","isHandle","initialWidth","mouseDownScreenX","screenX","stopPropagation","e","newWidth","overMinWidth","minWidth","underMaxWidth","maxWidth","host","[class.resizeable]","Renderer2","HostListener","create","__values","o","s","Symbol","iterator","m","i","call","length","value","done","TypeError","__read","n","r","ar","push","error","__spread","arguments","concat","OrderableDirective","differs","reorder","targetChanged","differ","find","ngAfterContentInit","updateSubscriptions","draggables","bind","forEach","d","diffs","diff","createMapDiffs","unsubscribe_1","previousValue","forEachAddedItem","onDragStart","onDragging","onDragEnd","forEachRemovedItem","positions","_b","toArray","_c","dragger","elm","parseInt","offsetLeft","toString","prop","right","index","prevPos","isTarget","lastDraggingIndex","prevIndex","newIndex","initialIndex","targets","elementsFromPoint","pos","this_1","el","reduce","acc","curr","$$id","KeyValueDiffers","ContentChildren","descendants","LongPressDirective","pressEnabled","duration","longPressStart","longPressing","longPressEnd","mouseX","mouseY","pressing","isLongPressing","onMouseDown","which","pressModel","mouseEvent","onMouseMove","loop","xThres","Math","abs","yThres","endPress","ScrollerComponent","ngZone","scrollbarV","scrollbarH","scroll","scrollYPos","scrollXPos","prevScrollYPos","prevScrollXPos","_scrollEventListener","parentElement","onScrolled","addEventListener","removeEventListener","setOffset","offsetY","scrollTop","dom","currentTarget","requestAnimationFrame","scrollLeft","updateOffset","direction","Component","class","changeDetection","ChangeDetectionStrategy","OnPush","type","DatatableGroupHeaderDirective","rowHeight","toggle","_templateInput","_templateQuery","toggleExpandGroup","group","expandAllGroups","collapseAllGroups","emptyStringGetter","getterForProp","numericIndexGetter","indexOf","deepValueGetter","shallowValueGetter","row","obj","fieldName","path","current","split","optionalGetterForProp","groupRowsByParents","rows","from","to","nodeById","l","node","TreeNode","uniqIDs","arr","item","toValue","parent","fromValue","children","resolvedRows_1","flatten","ContentChild","DatatableGroupHeaderTemplateDirective","read","static","ColumnMode","SelectionType","SortType","ContextmenuType","level","treeStatus","f","recursive","child","apply","Array","slice","camelCase","str","replace","trim","toLowerCase","a","b","c","toUpperCase","deCamelCase","match","id","random","pow","setColumnDefaults","columns","treeColumnFound","columns_1","columns_1_1","column","isNullOrUndefined","name","$$valueGetter","String","hasOwnProperty","resizeable","sortable","draggable","canAutoResize","isTreeColumn","translateTemplates","templates","result","templates_1","templates_1_1","temp","col","props","getOwnPropertyNames","props_1","e_3","props_1_1","headerTemplate","cellTemplate","summaryFunc","summaryTemplate","DataTableColumnDirective","columnChangesService","isFirstChange","_cellTemplateInput","_cellTemplateQuery","_headerTemplateInput","_headerTemplateQuery","_treeToggleTemplateInput","_treeToggleTemplateQuery","DataTableColumnCellDirective","DataTableColumnHeaderDirective","DataTableColumnCellTreeToggle","DatatableRowDetailDirective","toggleExpandRow","expandAllRows","collapseAllRows","DatatableRowDetailTemplateDirective","DatatableFooterDirective","columnsByPin","cols","ret","center","cols_1","cols_1_1","frozenLeft","frozenRight","columnGroupWidths","groups","all","columnTotalWidth","total","floor","totalWidth","parseFloat","columnsTotalWidth","columns_2","columns_2_1","columnsByPinArr","val","colsByPinArr","colsByPin","DataTableFooterTemplateDirective","RowHeightCache","treeArray","clearCache","initCache","details","detailRowHeight","externalVirtual","rowCount","rowIndexes","rowExpansions","isFn","isDetailFn","isNaN","Error","currentRowHeight","expanded","has","get","update","getRowIndex","scrollY","calcRowIndex","atRowIndex","byRowHeight","query","atIndex","sum","queryBetween","atIndexA","atIndexB","dataLength","blockSize","nextPos","cache","testStyle","styles","window","getComputedStyle","documentElement","join","pre","RegExp","lowercase","css","js","substr","prefix","getVendorPrefixedName","property","transform","backfaceVisibility","hasCSSTransforms","hasCSS3DTransforms","ua","navigator","userAgent","isSafari","test","translateXY","DataTableBodyComponent","cd","selected","page","activate","select","detailToggle","rowContextmenu","treeAction","rowHeightsCache","indexes","WeakMap","getDetailRowHeight","rowDetail","rowTrackingFn","idx","trackByProp","_pageSize","recalcLayout","_rows","_columns","_offset","virtualization","_rowCount","innerWidth","_bodyHeight","selectionType","listener","toggleRowExpansion","toggleAllRows","updateIndexes","updateRows","markForCheck","groupHeader","updateOffsetY","offset","scroller","rowIndex","pageSize","onBodyScroll","offsetX","updatePage","first","ceil","last","groupedRows","set","g","_idx","getRowHeight","getGroupHeight","getRowAndDetailHeight","getRowExpanded","getRowsStyles","getBottomSummaryRowStyles","position","hideIndicator","loadingIndicator","height","bodyHeight","externalPaging","max","min","refreshRowHeightCache","Set","getAdjustedViewPortIndex","viewPortFirstRowIndex","rowExpandedIdx","getRowExpandedIdx","splice","currentIndex","columnTrackingFn","stylesByGroup","widths","bodyWidth","groupExpansionDefault","rowId","rowIdentity","findIndex","onTreeAction","ChangeDetectorRef","ViewChild","SortDirection","DataTableHeaderComponent","sort","columnContextmenu","_columnGroupWidths","_styleByGroup","destroyed","_innerWidth","colByPin","setStylesByGroup","_headerHeight","_columnsByPin","_offsetX","onLongPressStart","dragEventTarget","onLongPressEnd","trackByGroups","colGroup","onColumnResized","prevValue","newValue","onColumnReordered","getColumn","targetMarkerContext","onTargetChanged","oldColumn","newColumn","leftColumnCount","centerColumnCount","onSort","sorts","calcNewSorts","map","assign","dir","sortType","single","calcStylesByGroup","detectChanges","throttle","func","wait","options","context","previous","later","leading","Date","now","remaining","trailing","throttleable","key","descriptor","configurable","enumerable","getTotalFlexGrow","totalFlexGrow","flexGrow","adjustColumnWidths","allColumns","expectedWidth","columnsWidth","colsByGroup","attr","e_2","_d","hasMinWidth","remainingWidth","widthPerFlexPoint","_e","_f","scaleColumns","forceFillColumnWidths","startIdx","allowBleed","defaultColWidth","columnsToResize","filter","columnsToResize_1","columnsToResize_1_1","$$oldWidth","additionWidthPerColumn","exceedsWindow","contentWidth","getContentWidth","columnsProcessed","columnsToResize_2","e_5","columnsToResize_2_1","newSize","removeProcessedColumns","columnsProcessed_1","columnsProcessed_1_1","allColumns_1","allColumns_1_1","nextSortDir","asc","desc","orderByComparator","isFinite","sortRows","dirs","rowToIndexMap","Map","comparator","cachedDirs","valueGetter","compareFn","rowA","rowB","cachedDirs_1","cachedDirs_1_1","cachedDir","propA","propB","comparison","DatatableComponent","scrollbarHelper","dimensionsHelper","configuration","columnMode","standard","headerHeight","footerHeight","externalSorting","reorderable","swapColumns","cssClasses","sortAscending","sortDescending","sortUnset","pagerLeftArrow","pagerRightArrow","pagerPrevious","pagerNext","messages","emptyMessage","totalMessage","selectedMessage","selectAllRowsOnPage","summaryRow","summaryHeight","summaryPosition","tableContextmenu","BehaviorSubject","_count","_subscriptions","_groupRowsBy","rowDiffer","_internalRows","sortInternalRows","treeFromRelation","treeToRelation","recalculate","groupArrayBy","_internalColumns","recalculateColumns","_limit","checkbox","cell","multi","multiClick","_columnTemplates","translateColumns","allRowsSelected","bodyComponent","rowsOnPage","count","limit","columnTemplates","v","listenForColumnInputChanges","originalArray","groupBy","ngDoCheck","recalculatePages","recalculateDims","onWindowResize","forceIdx","force","flex","dims","calcPageSize","calcRowCount","onBodyPage","onFooterPage","size","onColumnContextmenu","header","content","onRowContextmenu","onColumnResize","onColumnReorder","prevCol","movedCol","onColumnSort","onHeaderSelect","allSelected","onBodySelect","columnInputChanges$","notifyOnChanges","encapsulation","ViewEncapsulation","None","decorators","SkipSelf","Optional","getOwnPropertyDescriptor","Reflect","decorate","__decorate","DataTableHeaderCellComponent","sortFn","selectFn","cellContext","sortDir","_allRowsSelected","_column","_sorts","calcSortDir","sortClass","calcSortClass","cls","headerClass","res","keys","keys_1","keys_1_1","k","checkboxable","headerCheckboxable","onContextmenu","$event","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","DataTableFooterComponent","selectedCount","DataTablePagerComponent","change","_page","_size","pages","calcPages","canPrevious","canNext","totalPages","prevPage","selectPage","nextPage","startPage","endPage","isMaxSized","maxSize","num","number","text","Keys","DataTableBodyRowComponent","_groupStyles","_element","_rowDiffer","buildStylesByGroup","isSelected","rowClass","onActivate","cellIndex","rowElement","onKeyDown","keyCode","isTargetRow","return","down","up","onMouseenter","DataTableRowWrapperComponent","_expanded","groupContext","rowContext","_rowIndex","getGroupHeaderStyle","DataTableBodyCellComponent","isFocused","onCheckboxChangeFn","onCheckboxChange","activateFn","_group","checkValueUpdates","_rowHeight","_isSelected","_row","_treeStatus","status","cellClass","clear","userPipe","sanitizedValue","stripHtml","onFocus","onBlur","onClick","cellElement","onDblClick","isTargetCell","html","calcLeftMargin","levelIndent","treeLevelIndent","selectRows","comparefn","selectedIndex","selectRowsBetween","reverse","range","start","end","ViewContainerRef","DataTableSelectionComponent","selectRow","selectEnabled","chkbox","shiftKey","getRowSelectedIdx","ctrlKey","metaKey","selectCheck","onKeyboardFocus","isCellSelection","focusCell","focusRow","nextRowElement","getPrevNextRow","focus","focusElement","previousElementSibling","nextElementSibling","nextCellElement","getElementsByClassName","getRowSelected","defaultSumFunc","cells","cellsWithValues","some","noopSumFunc","DataTableSummaryRowComponent","updateInternalColumns","updateValues","cellsFromSingleColumn","sumFunc","getSummaryFunction","ClickType","NgxDatatableModule","forRoot","ngModule","providers","provide","useValue","elements","previousPointerEvents","elementFromPoint","getPropertyValue","priority","getPropertyPriority","setProperty","NgModule","imports","CommonModule","declarations","ProgressBarComponent","exports"],"mappings":"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","sourcesContent":["import { Inject, Injectable } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * Gets the width of the scrollbar.  Nesc for windows\n * http://stackoverflow.com/a/13382873/888165\n */\n@Injectable()\nexport class ScrollbarHelper {\n  width: number = this.getWidth();\n\n  constructor(@Inject(DOCUMENT) private document: any) {}\n\n  getWidth(): number {\n    const outer = this.document.createElement('div');\n    outer.style.visibility = 'hidden';\n    outer.style.width = '100px';\n    outer.style.msOverflowStyle = 'scrollbar';\n    this.document.body.appendChild(outer);\n\n    const widthNoScroll = outer.offsetWidth;\n    outer.style.overflow = 'scroll';\n\n    const inner = this.document.createElement('div');\n    inner.style.width = '100%';\n    outer.appendChild(inner);\n\n    const widthWithScroll = inner.offsetWidth;\n    outer.parentNode.removeChild(outer);\n\n    return widthNoScroll - widthWithScroll;\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\n\n/**\n * Gets the width of the scrollbar.  Nesc for windows\n * http://stackoverflow.com/a/13382873/888165\n */\n@Injectable()\nexport class DimensionsHelper {\n  getDimensions(element: Element): ClientRect {\n    return element.getBoundingClientRect();\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { Observable, Subject } from 'rxjs';\n\n/**\n * service to make DatatableComponent aware of changes to\n * input bindings of DataTableColumnDirective\n */\n@Injectable()\nexport class ColumnChangesService {\n  private columnInputChanges = new Subject<undefined>();\n\n  get columnInputChanges$(): Observable<undefined> {\n    return this.columnInputChanges.asObservable();\n  }\n\n  onInputChange(): void {\n    this.columnInputChanges.next();\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({ selector: '[ngx-datatable-footer-template]' })\nexport class DataTableFooterTemplateDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, Output, EventEmitter, ElementRef, HostBinding, NgZone, OnInit, OnDestroy } from '@angular/core';\n\n/**\n * Visibility Observer Directive\n *\n * Usage:\n *\n * \t\t<div\n * \t\t\tvisibilityObserver\n * \t\t\t(visible)=\"onVisible($event)\">\n * \t\t</div>\n *\n */\n@Directive({ selector: '[visibilityObserver]' })\nexport class VisibilityDirective implements OnInit, OnDestroy {\n  @HostBinding('class.visible')\n  isVisible: boolean = false;\n\n  @Output() visible: EventEmitter<any> = new EventEmitter();\n\n  timeout: any;\n\n  constructor(private element: ElementRef, private zone: NgZone) {}\n\n  ngOnInit(): void {\n    this.runCheck();\n  }\n\n  ngOnDestroy(): void {\n    clearTimeout(this.timeout);\n  }\n\n  onVisibilityChange(): void {\n    // trigger zone recalc for columns\n    this.zone.run(() => {\n      this.isVisible = true;\n      this.visible.emit(true);\n    });\n  }\n\n  runCheck(): void {\n    const check = () => {\n      // https://davidwalsh.name/offsetheight-visibility\n      const { offsetHeight, offsetWidth } = this.element.nativeElement;\n\n      if (offsetHeight && offsetWidth) {\n        clearTimeout(this.timeout);\n        this.onVisibilityChange();\n      } else {\n        clearTimeout(this.timeout);\n        this.zone.runOutsideAngular(() => {\n          this.timeout = setTimeout(() => check(), 50);\n        });\n      }\n    };\n\n    this.timeout = setTimeout(() => check());\n  }\n}\n","import { Directive, ElementRef, Input, Output, EventEmitter, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\nimport { Subscription, fromEvent } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n/**\n * Draggable Directive for Angular2\n *\n * Inspiration:\n *   https://github.com/AngularClass/angular2-examples/blob/master/rx-draggable/directives/draggable.ts\n *   http://stackoverflow.com/questions/35662530/how-to-implement-drag-and-drop-in-angular2\n *\n */\n@Directive({ selector: '[draggable]' })\nexport class DraggableDirective implements OnDestroy, OnChanges {\n  @Input() dragEventTarget: any;\n  @Input() dragModel: any;\n  @Input() dragX: boolean = true;\n  @Input() dragY: boolean = true;\n\n  @Output() dragStart: EventEmitter<any> = new EventEmitter();\n  @Output() dragging: EventEmitter<any> = new EventEmitter();\n  @Output() dragEnd: EventEmitter<any> = new EventEmitter();\n\n  element: HTMLElement;\n  isDragging: boolean = false;\n  subscription: Subscription;\n\n  constructor(element: ElementRef) {\n    this.element = element.nativeElement;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['dragEventTarget'] && changes['dragEventTarget'].currentValue && this.dragModel.dragging) {\n      this.onMousedown(changes['dragEventTarget'].currentValue);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._destroySubscription();\n  }\n\n  onMouseup(event: MouseEvent): void {\n    if (!this.isDragging) return;\n\n    this.isDragging = false;\n    this.element.classList.remove('dragging');\n\n    if (this.subscription) {\n      this._destroySubscription();\n      this.dragEnd.emit({\n        event,\n        element: this.element,\n        model: this.dragModel\n      });\n    }\n  }\n\n  onMousedown(event: MouseEvent): void {\n    // we only want to drag the inner header text\n    const isDragElm = (<HTMLElement>event.target).classList.contains('draggable');\n\n    if (isDragElm && (this.dragX || this.dragY)) {\n      event.preventDefault();\n      this.isDragging = true;\n\n      const mouseDownPos = { x: event.clientX, y: event.clientY };\n\n      const mouseup = fromEvent(document, 'mouseup');\n      this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup(ev));\n\n      const mouseMoveSub = fromEvent(document, 'mousemove')\n        .pipe(takeUntil(mouseup))\n        .subscribe((ev: MouseEvent) => this.move(ev, mouseDownPos));\n\n      this.subscription.add(mouseMoveSub);\n\n      this.dragStart.emit({\n        event,\n        element: this.element,\n        model: this.dragModel\n      });\n    }\n  }\n\n  move(event: MouseEvent, mouseDownPos: { x: number; y: number }): void {\n    if (!this.isDragging) return;\n\n    const x = event.clientX - mouseDownPos.x;\n    const y = event.clientY - mouseDownPos.y;\n\n    if (this.dragX) this.element.style.left = `${x}px`;\n    if (this.dragY) this.element.style.top = `${y}px`;\n\n    this.element.classList.add('dragging');\n\n    this.dragging.emit({\n      event,\n      element: this.element,\n      model: this.dragModel\n    });\n  }\n\n  private _destroySubscription(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = undefined;\n    }\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  HostListener,\n  Input,\n  Output,\n  EventEmitter,\n  OnDestroy,\n  AfterViewInit,\n  Renderer2\n} from '@angular/core';\nimport { Subscription, fromEvent } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n@Directive({\n  selector: '[resizeable]',\n  host: {\n    '[class.resizeable]': 'resizeEnabled'\n  }\n})\nexport class ResizeableDirective implements OnDestroy, AfterViewInit {\n  @Input() resizeEnabled: boolean = true;\n  @Input() minWidth: number;\n  @Input() maxWidth: number;\n\n  @Output() resize: EventEmitter<any> = new EventEmitter();\n\n  element: HTMLElement;\n  subscription: Subscription;\n  resizing: boolean = false;\n  private resizeHandle: HTMLElement;\n\n  constructor(element: ElementRef, private renderer: Renderer2) {\n    this.element = element.nativeElement;\n  }\n\n  ngAfterViewInit(): void {\n    const renderer2 = this.renderer;\n    this.resizeHandle = renderer2.createElement('span');\n    if (this.resizeEnabled) {\n      renderer2.addClass(this.resizeHandle, 'resize-handle');\n    } else {\n      renderer2.addClass(this.resizeHandle, 'resize-handle--not-resizable');\n    }\n    renderer2.appendChild(this.element, this.resizeHandle);\n  }\n\n  ngOnDestroy(): void {\n    this._destroySubscription();\n    if (this.renderer.destroyNode) {\n      this.renderer.destroyNode(this.resizeHandle);\n    } else if (this.resizeHandle) {\n      this.renderer.removeChild(this.renderer.parentNode(this.resizeHandle), this.resizeHandle);\n    }\n  }\n\n  onMouseup(): void {\n    this.resizing = false;\n\n    if (this.subscription && !this.subscription.closed) {\n      this._destroySubscription();\n      this.resize.emit(this.element.clientWidth);\n    }\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMousedown(event: MouseEvent): void {\n    const isHandle = (<HTMLElement>event.target).classList.contains('resize-handle');\n    const initialWidth = this.element.clientWidth;\n    const mouseDownScreenX = event.screenX;\n\n    if (isHandle) {\n      event.stopPropagation();\n      this.resizing = true;\n\n      const mouseup = fromEvent(document, 'mouseup');\n      this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup());\n\n      const mouseMoveSub = fromEvent(document, 'mousemove')\n        .pipe(takeUntil(mouseup))\n        .subscribe((e: MouseEvent) => this.move(e, initialWidth, mouseDownScreenX));\n\n      this.subscription.add(mouseMoveSub);\n    }\n  }\n\n  move(event: MouseEvent, initialWidth: number, mouseDownScreenX: number): void {\n    const movementX = event.screenX - mouseDownScreenX;\n    const newWidth = initialWidth + movementX;\n\n    const overMinWidth = !this.minWidth || newWidth >= this.minWidth;\n    const underMaxWidth = !this.maxWidth || newWidth <= this.maxWidth;\n\n    if (overMinWidth && underMaxWidth) {\n      this.element.style.width = `${newWidth}px`;\n    }\n  }\n\n  private _destroySubscription() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = undefined;\n    }\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\n  Directive,\n  Output,\n  EventEmitter,\n  ContentChildren,\n  QueryList,\n  KeyValueDiffers,\n  AfterContentInit,\n  OnDestroy,\n  Inject\n} from '@angular/core';\nimport { DraggableDirective } from './draggable.directive';\nimport { DOCUMENT } from '@angular/common';\n\n@Directive({ selector: '[orderable]' })\nexport class OrderableDirective implements AfterContentInit, OnDestroy {\n  @Output() reorder: EventEmitter<any> = new EventEmitter();\n  @Output() targetChanged: EventEmitter<any> = new EventEmitter();\n\n  @ContentChildren(DraggableDirective, { descendants: true })\n  draggables: QueryList<DraggableDirective>;\n\n  positions: any;\n  differ: any;\n  lastDraggingIndex: number;\n\n  constructor(differs: KeyValueDiffers, @Inject(DOCUMENT) private document: any) {\n    this.differ = differs.find({}).create();\n  }\n\n  ngAfterContentInit(): void {\n    // HACK: Investigate Better Way\n    this.updateSubscriptions();\n    this.draggables.changes.subscribe(this.updateSubscriptions.bind(this));\n  }\n\n  ngOnDestroy(): void {\n    this.draggables.forEach(d => {\n      d.dragStart.unsubscribe();\n      d.dragging.unsubscribe();\n      d.dragEnd.unsubscribe();\n    });\n  }\n\n  updateSubscriptions(): void {\n    const diffs = this.differ.diff(this.createMapDiffs());\n\n    if (diffs) {\n      const subscribe = ({ currentValue, previousValue }: any) => {\n        unsubscribe({ previousValue });\n\n        if (currentValue) {\n          currentValue.dragStart.subscribe(this.onDragStart.bind(this));\n          currentValue.dragging.subscribe(this.onDragging.bind(this));\n          currentValue.dragEnd.subscribe(this.onDragEnd.bind(this));\n        }\n      };\n\n      const unsubscribe = ({ previousValue }: any) => {\n        if (previousValue) {\n          previousValue.dragStart.unsubscribe();\n          previousValue.dragging.unsubscribe();\n          previousValue.dragEnd.unsubscribe();\n        }\n      };\n\n      diffs.forEachAddedItem(subscribe);\n      // diffs.forEachChangedItem(subscribe.bind(this));\n      diffs.forEachRemovedItem(unsubscribe);\n    }\n  }\n\n  onDragStart(): void {\n    this.positions = {};\n\n    let i = 0;\n    for (const dragger of this.draggables.toArray()) {\n      const elm = dragger.element;\n      const left = parseInt(elm.offsetLeft.toString(), 0);\n      this.positions[dragger.dragModel.prop] = {\n        left,\n        right: left + parseInt(elm.offsetWidth.toString(), 0),\n        index: i++,\n        element: elm\n      };\n    }\n  }\n\n  onDragging({ element, model, event }: any): void {\n    const prevPos = this.positions[model.prop];\n    const target = this.isTarget(model, event);\n\n    if (target) {\n      if (this.lastDraggingIndex !== target.i) {\n        this.targetChanged.emit({\n          prevIndex: this.lastDraggingIndex,\n          newIndex: target.i,\n          initialIndex: prevPos.index\n        });\n        this.lastDraggingIndex = target.i;\n      }\n    } else if (this.lastDraggingIndex !== prevPos.index) {\n      this.targetChanged.emit({\n        prevIndex: this.lastDraggingIndex,\n        initialIndex: prevPos.index\n      });\n      this.lastDraggingIndex = prevPos.index;\n    }\n  }\n\n  onDragEnd({ element, model, event }: any): void {\n    const prevPos = this.positions[model.prop];\n\n    const target = this.isTarget(model, event);\n    if (target) {\n      this.reorder.emit({\n        prevIndex: prevPos.index,\n        newIndex: target.i,\n        model\n      });\n    }\n\n    this.lastDraggingIndex = undefined;\n    element.style.left = 'auto';\n  }\n\n  isTarget(model: any, event: any): any {\n    let i = 0;\n    const x = event.x || event.clientX;\n    const y = event.y || event.clientY;\n    const targets = this.document.elementsFromPoint(x, y);\n\n    for (const prop in this.positions) {\n      // current column position which throws event.\n      const pos = this.positions[prop];\n\n      // since we drag the inner span, we need to find it in the elements at the cursor\n      if (model.prop !== prop && targets.find((el: any) => el === pos.element)) {\n        return {\n          pos,\n          i\n        };\n      }\n\n      i++;\n    }\n  }\n\n  private createMapDiffs(): { [key: string]: DraggableDirective } {\n    return this.draggables.toArray().reduce((acc, curr) => {\n      acc[curr.dragModel.$$id] = curr;\n      return acc;\n    }, {});\n  }\n}\n","import { Directive, Input, Output, EventEmitter, HostBinding, HostListener, OnDestroy } from '@angular/core';\nimport { Observable, Subscription, fromEvent } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { MouseEvent } from '../events';\n\n@Directive({ selector: '[long-press]' })\nexport class LongPressDirective implements OnDestroy {\n  @Input() pressEnabled: boolean = true;\n  @Input() pressModel: any;\n  @Input() duration: number = 500;\n\n  @Output() longPressStart: EventEmitter<any> = new EventEmitter();\n  @Output() longPressing: EventEmitter<any> = new EventEmitter();\n  @Output() longPressEnd: EventEmitter<any> = new EventEmitter();\n\n  pressing: boolean;\n  isLongPressing: boolean;\n  timeout: any;\n  mouseX: number = 0;\n  mouseY: number = 0;\n\n  subscription: Subscription;\n\n  @HostBinding('class.press')\n  get press(): boolean {\n    return this.pressing;\n  }\n\n  @HostBinding('class.longpress')\n  get isLongPress(): boolean {\n    return this.isLongPressing;\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMouseDown(event: MouseEvent): void {\n    // don't do right/middle clicks\n    if (event.which !== 1 || !this.pressEnabled) return;\n\n    // don't start drag if its on resize handle\n    const target = <HTMLElement>event.target;\n    if (target.classList.contains('resize-handle')) return;\n\n    this.mouseX = event.clientX;\n    this.mouseY = event.clientY;\n\n    this.pressing = true;\n    this.isLongPressing = false;\n\n    const mouseup = fromEvent(document, 'mouseup');\n    this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup());\n\n    this.timeout = setTimeout(() => {\n      this.isLongPressing = true;\n      this.longPressStart.emit({\n        event,\n        model: this.pressModel\n      });\n\n      this.subscription.add(\n        fromEvent(document, 'mousemove')\n          .pipe(takeUntil(mouseup))\n          .subscribe((mouseEvent: MouseEvent) => this.onMouseMove(mouseEvent))\n      );\n\n      this.loop(event);\n    }, this.duration);\n\n    this.loop(event);\n  }\n\n  onMouseMove(event: MouseEvent): void {\n    if (this.pressing && !this.isLongPressing) {\n      const xThres = Math.abs(event.clientX - this.mouseX) > 10;\n      const yThres = Math.abs(event.clientY - this.mouseY) > 10;\n\n      if (xThres || yThres) {\n        this.endPress();\n      }\n    }\n  }\n\n  loop(event: MouseEvent): void {\n    if (this.isLongPressing) {\n      this.timeout = setTimeout(() => {\n        this.longPressing.emit({\n          event,\n          model: this.pressModel\n        });\n        this.loop(event);\n      }, 50);\n    }\n  }\n\n  endPress(): void {\n    clearTimeout(this.timeout);\n    this.isLongPressing = false;\n    this.pressing = false;\n    this._destroySubscription();\n\n    this.longPressEnd.emit({\n      model: this.pressModel\n    });\n  }\n\n  onMouseup(): void {\n    this.endPress();\n  }\n\n  ngOnDestroy(): void {\n    this._destroySubscription();\n  }\n\n  private _destroySubscription(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = undefined;\n    }\n  }\n}\n","import {\n  Component,\n  Input,\n  ElementRef,\n  Output,\n  EventEmitter,\n  Renderer2,\n  NgZone,\n  OnInit,\n  OnDestroy,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { MouseEvent } from '../../events';\n\n@Component({\n  selector: 'datatable-scroller',\n  template: ` <ng-content></ng-content> `,\n  host: {\n    class: 'datatable-scroll'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ScrollerComponent implements OnInit, OnDestroy {\n  @Input() scrollbarV: boolean = false;\n  @Input() scrollbarH: boolean = false;\n\n  @HostBinding('style.height.px')\n  @Input()\n  scrollHeight: number;\n\n  @HostBinding('style.width.px')\n  @Input()\n  scrollWidth: number;\n\n  @Output() scroll: EventEmitter<any> = new EventEmitter();\n\n  scrollYPos: number = 0;\n  scrollXPos: number = 0;\n  prevScrollYPos: number = 0;\n  prevScrollXPos: number = 0;\n  element: any;\n  parentElement: any;\n  onScrollListener: any;\n\n  private _scrollEventListener: any = null;\n\n  constructor(private ngZone: NgZone, element: ElementRef, private renderer: Renderer2) {\n    this.element = element.nativeElement;\n  }\n\n  ngOnInit(): void {\n    // manual bind so we don't always listen\n    if (this.scrollbarV || this.scrollbarH) {\n      const renderer = this.renderer;\n      this.parentElement = renderer.parentNode(renderer.parentNode(this.element));\n      this._scrollEventListener = this.onScrolled.bind(this);\n      this.parentElement.addEventListener('scroll', this._scrollEventListener);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this._scrollEventListener) {\n      this.parentElement.removeEventListener('scroll', this._scrollEventListener);\n      this._scrollEventListener = null;\n    }\n  }\n\n  setOffset(offsetY: number): void {\n    if (this.parentElement) {\n      this.parentElement.scrollTop = offsetY;\n    }\n  }\n\n  onScrolled(event: MouseEvent): void {\n    const dom: Element = <Element>event.currentTarget;\n    requestAnimationFrame(() => {\n      this.scrollYPos = dom.scrollTop;\n      this.scrollXPos = dom.scrollLeft;\n      this.updateOffset();\n    });\n  }\n\n  updateOffset(): void {\n    let direction: string;\n    if (this.scrollYPos < this.prevScrollYPos) {\n      direction = 'down';\n    } else if (this.scrollYPos > this.prevScrollYPos) {\n      direction = 'up';\n    }\n\n    this.scroll.emit({\n      direction,\n      scrollYPos: this.scrollYPos,\n      scrollXPos: this.scrollXPos\n    });\n\n    this.prevScrollYPos = this.scrollYPos;\n    this.prevScrollXPos = this.scrollXPos;\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[ngx-datatable-group-header-template]'\n})\nexport class DatatableGroupHeaderTemplateDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Input, Output, EventEmitter, Directive, TemplateRef, ContentChild } from '@angular/core';\nimport { DatatableGroupHeaderTemplateDirective } from './body-group-header-template.directive';\n\n@Directive({ selector: 'ngx-datatable-group-header' })\nexport class DatatableGroupHeaderDirective {\n  /**\n   * Row height is required when virtual scroll is enabled.\n   */\n  @Input() rowHeight: number | ((group?: any, index?: number) => number) = 0;\n\n  @Input('template')\n  _templateInput: TemplateRef<any>;\n\n  @ContentChild(DatatableGroupHeaderTemplateDirective, { read: TemplateRef, static: true })\n  _templateQuery: TemplateRef<any>;\n\n  get template(): TemplateRef<any> {\n    return this._templateInput || this._templateQuery;\n  }\n\n  /**\n   * Track toggling of group visibility\n   */\n  @Output() toggle: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Toggle the expansion of a group\n   */\n  toggleExpandGroup(group: any): void {\n    this.toggle.emit({\n      type: 'group',\n      value: group\n    });\n  }\n\n  /**\n   * Expand all groups\n   */\n  expandAllGroups(): void {\n    this.toggle.emit({\n      type: 'all',\n      value: true\n    });\n  }\n\n  /**\n   * Collapse all groups\n   */\n  collapseAllGroups(): void {\n    this.toggle.emit({\n      type: 'all',\n      value: false\n    });\n  }\n}\n","import { TableColumnProp } from '../types/table-column.type';\n\n// maybe rename this file to prop-getters.ts\n\nexport type ValueGetter = (obj: any, prop: TableColumnProp) => any;\n\n/**\n * Always returns the empty string ''\n */\nexport function emptyStringGetter(): string {\n  return '';\n}\n\n/**\n * Returns the appropriate getter function for this kind of prop.\n * If prop == null, returns the emptyStringGetter.\n */\nexport function getterForProp(prop: TableColumnProp): ValueGetter {\n  if (prop == null) {\n    return emptyStringGetter;\n  }\n\n  if (typeof prop === 'number') {\n    return numericIndexGetter;\n  } else {\n    // deep or simple\n    if (prop.indexOf('.') !== -1) {\n      return deepValueGetter;\n    } else {\n      return shallowValueGetter;\n    }\n  }\n}\n\n/**\n * Returns the value at this numeric index.\n * @param row array of values\n * @param index numeric index\n * @returns any or '' if invalid index\n */\nexport function numericIndexGetter(row: any[], index: number): any {\n  if (row == null) {\n    return '';\n  }\n  // mimic behavior of deepValueGetter\n  if (!row || index == null) {\n    return row;\n  }\n\n  const value = row[index];\n  if (value == null) {\n    return '';\n  }\n  return value;\n}\n\n/**\n * Returns the value of a field.\n * (more efficient than deepValueGetter)\n * @param obj object containing the field\n * @param fieldName field name string\n */\nexport function shallowValueGetter(obj: any, fieldName: string): any {\n  if (obj == null) {\n    return '';\n  }\n  if (!obj || !fieldName) {\n    return obj;\n  }\n\n  const value = obj[fieldName];\n  if (value == null) {\n    return '';\n  }\n  return value;\n}\n\n/**\n * Returns a deep object given a string. zoo['animal.type']\n */\nexport function deepValueGetter(obj: any, path: string): any {\n  if (obj == null) {\n    return '';\n  }\n  if (!obj || !path) {\n    return obj;\n  }\n\n  // check if path matches a root-level field\n  // { \"a.b.c\": 123 }\n  let current = obj[path];\n  if (current !== undefined) {\n    return current;\n  }\n\n  current = obj;\n  const split = path.split('.');\n\n  if (split.length) {\n    for (let i = 0; i < split.length; i++) {\n      current = current[split[i]];\n\n      // if found undefined, return empty string\n      if (current === undefined || current === null) {\n        return '';\n      }\n    }\n  }\n\n  return current;\n}\n","import { getterForProp } from './column-prop-getters';\nimport { TableColumnProp } from '../types/table-column.type';\n\nexport type OptionalValueGetter = (row: any) => any | undefined;\nexport function optionalGetterForProp(prop: TableColumnProp): OptionalValueGetter {\n  return prop && (row => getterForProp(prop)(row, prop));\n}\n\n/**\n * This functions rearrange items by their parents\n * Also sets the level value to each of the items\n *\n * Note: Expecting each item has a property called parentId\n * Note: This algorithm will fail if a list has two or more items with same ID\n * NOTE: This algorithm will fail if there is a deadlock of relationship\n *\n * For example,\n *\n * Input\n *\n * id -> parent\n * 1  -> 0\n * 2  -> 0\n * 3  -> 1\n * 4  -> 1\n * 5  -> 2\n * 7  -> 8\n * 6  -> 3\n *\n *\n * Output\n * id -> level\n * 1      -> 0\n * --3    -> 1\n * ----6  -> 2\n * --4    -> 1\n * 2      -> 0\n * --5    -> 1\n * 7     -> 8\n *\n *\n * @param rows\n *\n */\nexport function groupRowsByParents(rows: any[], from?: OptionalValueGetter, to?: OptionalValueGetter): any[] {\n  if (from && to) {\n    const nodeById = {};\n    const l = rows.length;\n    let node: TreeNode | null = null;\n\n    nodeById[0] = new TreeNode(); // that's the root node\n\n    const uniqIDs = rows.reduce((arr, item) => {\n      const toValue = to(item);\n      if (arr.indexOf(toValue) === -1) {\n        arr.push(toValue);\n      }\n      return arr;\n    }, []);\n\n    for (let i = 0; i < l; i++) {\n      // make TreeNode objects for each item\n      nodeById[to(rows[i])] = new TreeNode(rows[i]);\n    }\n\n    for (let i = 0; i < l; i++) {\n      // link all TreeNode objects\n      node = nodeById[to(rows[i])];\n      let parent = 0;\n      const fromValue = from(node.row);\n      if (!!fromValue && uniqIDs.indexOf(fromValue) > -1) {\n        parent = fromValue;\n      }\n      node.parent = nodeById[parent];\n      node.row['level'] = node.parent.row['level'] + 1;\n      node.parent.children.push(node);\n    }\n\n    let resolvedRows: any[] = [];\n    nodeById[0].flatten(function () {\n      resolvedRows = [...resolvedRows, this.row];\n    }, true);\n\n    return resolvedRows;\n  } else {\n    return rows;\n  }\n}\n\nclass TreeNode {\n  public row: any;\n  public parent: any;\n  public children: any[];\n\n  constructor(row: any | null = null) {\n    if (!row) {\n      row = {\n        level: -1,\n        treeStatus: 'expanded'\n      };\n    }\n    this.row = row;\n    this.parent = null;\n    this.children = [];\n  }\n\n  flatten(f: any, recursive: boolean) {\n    if (this.row['treeStatus'] === 'expanded') {\n      for (let i = 0, l = this.children.length; i < l; i++) {\n        const child = this.children[i];\n        f.apply(child, Array.prototype.slice.call(arguments, 2));\n        if (recursive) child.flatten.apply(child, arguments);\n      }\n    }\n  }\n}\n","export enum ColumnMode {\n  standard = 'standard',\n  flex = 'flex',\n  force = 'force'\n}\n","export enum SelectionType {\n  single = 'single',\n  multi = 'multi',\n  multiClick = 'multiClick',\n  cell = 'cell',\n  checkbox = 'checkbox'\n}\n","export enum SortType {\n  single = 'single',\n  multi = 'multi'\n}\n","export enum ContextmenuType {\n  header = 'header',\n  body = 'body'\n}\n","/**\n * Converts strings from something to camel case\n * http://stackoverflow.com/questions/10425287/convert-dash-separated-string-to-camelcase\n */\nexport function camelCase(str: string): string {\n  // Replace special characters with a space\n  str = str.replace(/[^a-zA-Z0-9 ]/g, ' ');\n  // put a space before an uppercase letter\n  str = str.replace(/([a-z](?=[A-Z]))/g, '$1 ');\n\n  // Lower case first character and some other stuff\n  str = str\n    .replace(/([^a-zA-Z0-9 ])|^[0-9]+/g, '')\n    .trim()\n    .toLowerCase();\n\n  // uppercase characters preceded by a space or number\n  str = str.replace(/([ 0-9]+)([a-zA-Z])/g, function (a, b, c) {\n    return b.trim() + c.toUpperCase();\n  });\n\n  return str;\n}\n\n/**\n * Converts strings from camel case to words\n * http://stackoverflow.com/questions/7225407/convert-camelcasetext-to-camel-case-text\n */\nexport function deCamelCase(str: string): string {\n  return str.replace(/([A-Z])/g, match => ` ${match}`).replace(/^./, match => match.toUpperCase());\n}\n","/**\n * Creates a unique object id.\n * http://stackoverflow.com/questions/6248666/how-to-generate-short-uid-like-ax4j9z-in-js\n */\nexport function id() {\n  return ('0000' + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n}\n","import { camelCase, deCamelCase } from './camel-case';\nimport { id } from './id';\nimport { getterForProp } from './column-prop-getters';\nimport { TableColumn } from '../types/table-column.type';\nimport { DataTableColumnDirective } from '../components/columns/column.directive';\n\n/**\n * Sets the column defaults\n */\nexport function setColumnDefaults(columns: TableColumn[]) {\n  if (!columns) return;\n\n  // Only one column should hold the tree view\n  // Thus if multiple columns are provided with\n  // isTreeColumn as true we take only the first one\n  let treeColumnFound: boolean = false;\n\n  for (const column of columns) {\n    if (!column.$$id) {\n      column.$$id = id();\n    }\n\n    // prop can be numeric; zero is valid not a missing prop\n    // translate name => prop\n    if (isNullOrUndefined(column.prop) && column.name) {\n      column.prop = camelCase(column.name);\n    }\n\n    if (!column.$$valueGetter) {\n      column.$$valueGetter = getterForProp(column.prop);\n    }\n\n    // format props if no name passed\n    if (!isNullOrUndefined(column.prop) && isNullOrUndefined(column.name)) {\n      column.name = deCamelCase(String(column.prop));\n    }\n\n    if (isNullOrUndefined(column.prop) && isNullOrUndefined(column.name)) {\n      column.name = ''; // Fixes IE and Edge displaying `null`\n    }\n\n    if (!column.hasOwnProperty('resizeable')) {\n      column.resizeable = true;\n    }\n\n    if (!column.hasOwnProperty('sortable')) {\n      column.sortable = true;\n    }\n\n    if (!column.hasOwnProperty('draggable')) {\n      column.draggable = true;\n    }\n\n    if (!column.hasOwnProperty('canAutoResize')) {\n      column.canAutoResize = true;\n    }\n\n    if (!column.hasOwnProperty('width')) {\n      column.width = 150;\n    }\n\n    if (!column.hasOwnProperty('isTreeColumn')) {\n      column.isTreeColumn = false;\n    } else {\n      if (column.isTreeColumn && !treeColumnFound) {\n        // If the first column with isTreeColumn is true found\n        // we mark that treeCoulmn is found\n        treeColumnFound = true;\n      } else {\n        // After that isTreeColumn property for any other column\n        // will be set as false\n        column.isTreeColumn = false;\n      }\n    }\n  }\n}\n\nexport function isNullOrUndefined<T>(value: T | null | undefined): value is null | undefined {\n  return value === null || value === undefined;\n}\n\n/**\n * Translates templates definitions to objects\n */\nexport function translateTemplates(templates: DataTableColumnDirective[]): any[] {\n  const result: any[] = [];\n  for (const temp of templates) {\n    const col: any = {};\n\n    const props = Object.getOwnPropertyNames(temp);\n    for (const prop of props) {\n      col[prop] = temp[prop];\n    }\n\n    if (temp.headerTemplate) {\n      col.headerTemplate = temp.headerTemplate;\n    }\n\n    if (temp.cellTemplate) {\n      col.cellTemplate = temp.cellTemplate;\n    }\n\n    if (temp.summaryFunc) {\n      col.summaryFunc = temp.summaryFunc;\n    }\n\n    if (temp.summaryTemplate) {\n      col.summaryTemplate = temp.summaryTemplate;\n    }\n\n    result.push(col);\n  }\n\n  return result;\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({ selector: '[ngx-datatable-header-template]' })\nexport class DataTableColumnHeaderDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({ selector: '[ngx-datatable-cell-template]' })\nexport class DataTableColumnCellDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({ selector: '[ngx-datatable-tree-toggle]' })\nexport class DataTableColumnCellTreeToggle {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, TemplateRef, ContentChild, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { DataTableColumnHeaderDirective } from './column-header.directive';\nimport { DataTableColumnCellDirective } from './column-cell.directive';\nimport { DataTableColumnCellTreeToggle } from './tree.directive';\nimport { ColumnChangesService } from '../../services/column-changes.service';\nimport { TableColumnProp } from '../../types/table-column.type';\n\n@Directive({ selector: 'ngx-datatable-column' })\nexport class DataTableColumnDirective implements OnChanges {\n  @Input() name: string;\n  @Input() prop: TableColumnProp;\n  @Input() frozenLeft: any;\n  @Input() frozenRight: any;\n  @Input() flexGrow: number;\n  @Input() resizeable: boolean;\n  @Input() comparator: any;\n  @Input() pipe: any;\n  @Input() sortable: boolean;\n  @Input() draggable: boolean;\n  @Input() canAutoResize: boolean;\n  @Input() minWidth: number;\n  @Input() width: number;\n  @Input() maxWidth: number;\n  @Input() checkboxable: boolean;\n  @Input() headerCheckboxable: boolean;\n  @Input() headerClass: string | ((data: any) => string | any);\n  @Input() cellClass: string | ((data: any) => string | any);\n  @Input() isTreeColumn: boolean;\n  @Input() treeLevelIndent: number;\n  @Input() summaryFunc: (cells: any[]) => any;\n  @Input() summaryTemplate: TemplateRef<any>;\n\n  @Input('cellTemplate')\n  _cellTemplateInput: TemplateRef<any>;\n\n  @ContentChild(DataTableColumnCellDirective, { read: TemplateRef, static: true })\n  _cellTemplateQuery: TemplateRef<any>;\n\n  get cellTemplate(): TemplateRef<any> {\n    return this._cellTemplateInput || this._cellTemplateQuery;\n  }\n\n  @Input('headerTemplate')\n  _headerTemplateInput: TemplateRef<any>;\n\n  @ContentChild(DataTableColumnHeaderDirective, { read: TemplateRef, static: true })\n  _headerTemplateQuery: TemplateRef<any>;\n\n  get headerTemplate(): TemplateRef<any> {\n    return this._headerTemplateInput || this._headerTemplateQuery;\n  }\n\n  @Input('treeToggleTemplate')\n  _treeToggleTemplateInput: TemplateRef<any>;\n\n  @ContentChild(DataTableColumnCellTreeToggle, { read: TemplateRef, static: true })\n  _treeToggleTemplateQuery: TemplateRef<any>;\n\n  get treeToggleTemplate(): TemplateRef<any> {\n    return this._treeToggleTemplateInput || this._treeToggleTemplateQuery;\n  }\n\n  private isFirstChange = true;\n\n  constructor(private columnChangesService: ColumnChangesService) {}\n\n  ngOnChanges() {\n    if (this.isFirstChange) {\n      this.isFirstChange = false;\n    } else {\n      this.columnChangesService.onInputChange();\n    }\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[ngx-datatable-row-detail-template]'\n})\nexport class DatatableRowDetailTemplateDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Input, Output, EventEmitter, Directive, TemplateRef, ContentChild } from '@angular/core';\nimport { DatatableRowDetailTemplateDirective } from './row-detail-template.directive';\n\n@Directive({ selector: 'ngx-datatable-row-detail' })\nexport class DatatableRowDetailDirective {\n  /**\n   * The detail row height is required especially\n   * when virtual scroll is enabled.\n   */\n  @Input() rowHeight: number | ((row?: any, index?: number) => number) = 0;\n\n  @Input('template')\n  _templateInput: TemplateRef<any>;\n\n  @ContentChild(DatatableRowDetailTemplateDirective, { read: TemplateRef, static: true })\n  _templateQuery: TemplateRef<any>;\n\n  get template(): TemplateRef<any> {\n    return this._templateInput || this._templateQuery;\n  }\n\n  /**\n   * Row detail row visbility was toggled.\n   */\n  @Output() toggle: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Toggle the expansion of the row\n   */\n  toggleExpandRow(row: any): void {\n    this.toggle.emit({\n      type: 'row',\n      value: row\n    });\n  }\n\n  /**\n   * API method to expand all the rows.\n   */\n  expandAllRows(): void {\n    this.toggle.emit({\n      type: 'all',\n      value: true\n    });\n  }\n\n  /**\n   * API method to collapse all the rows.\n   */\n  collapseAllRows(): void {\n    this.toggle.emit({\n      type: 'all',\n      value: false\n    });\n  }\n}\n","import { Input, Directive, TemplateRef, ContentChild } from '@angular/core';\nimport { DataTableFooterTemplateDirective } from './footer-template.directive';\n\n@Directive({ selector: 'ngx-datatable-footer' })\nexport class DatatableFooterDirective {\n  @Input() footerHeight: number;\n  @Input() totalMessage: string;\n  @Input() selectedMessage: string | boolean;\n  @Input() pagerLeftArrowIcon: string;\n  @Input() pagerRightArrowIcon: string;\n  @Input() pagerPreviousIcon: string;\n  @Input() pagerNextIcon: string;\n\n  @Input('template')\n  _templateInput: TemplateRef<any>;\n\n  @ContentChild(DataTableFooterTemplateDirective, { read: TemplateRef })\n  _templateQuery: TemplateRef<any>;\n\n  get template(): TemplateRef<any> {\n    return this._templateInput || this._templateQuery;\n  }\n}\n","/**\n * Returns the columns by pin.\n */\nexport function columnsByPin(cols: any[]) {\n  const ret: { left: any; center: any; right: any } = {\n    left: [],\n    center: [],\n    right: []\n  };\n\n  if (cols) {\n    for (const col of cols) {\n      if (col.frozenLeft) {\n        ret.left.push(col);\n      } else if (col.frozenRight) {\n        ret.right.push(col);\n      } else {\n        ret.center.push(col);\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Returns the widths of all group sets of a column\n */\nexport function columnGroupWidths(groups: any, all: any) {\n  return {\n    left: columnTotalWidth(groups.left),\n    center: columnTotalWidth(groups.center),\n    right: columnTotalWidth(groups.right),\n    total: Math.floor(columnTotalWidth(all))\n  };\n}\n\n/**\n * Calculates the total width of all columns and their groups\n */\nexport function columnTotalWidth(columns: any[], prop?: string) {\n  let totalWidth = 0;\n\n  if (columns) {\n    for (const c of columns) {\n      const has = prop && c[prop];\n      const width = has ? c[prop] : c.width;\n      totalWidth = totalWidth + parseFloat(width);\n    }\n  }\n\n  return totalWidth;\n}\n\n/**\n * Calculates the total width of all columns and their groups\n */\nexport function columnsTotalWidth(columns: any, prop?: any) {\n  let totalWidth = 0;\n\n  for (const column of columns) {\n    const has = prop && column[prop];\n    totalWidth = totalWidth + (has ? column[prop] : column.width);\n  }\n\n  return totalWidth;\n}\n\nexport function columnsByPinArr(val: any) {\n  const colsByPinArr = [];\n  const colsByPin = columnsByPin(val);\n\n  colsByPinArr.push({ type: 'left', columns: colsByPin['left'] });\n  colsByPinArr.push({ type: 'center', columns: colsByPin['center'] });\n  colsByPinArr.push({ type: 'right', columns: colsByPin['right'] });\n\n  return colsByPinArr;\n}\n","/**\n * This object contains the cache of the various row heights that are present inside\n * the data table.   Its based on Fenwick tree data structure that helps with\n * querying sums that have time complexity of log n.\n *\n * Fenwick Tree Credits: http://petr-mitrichev.blogspot.com/2013/05/fenwick-tree-range-updates.html\n * https://github.com/mikolalysenko/fenwick-tree\n *\n */\nexport class RowHeightCache {\n  /**\n   * Tree Array stores the cumulative information of the row heights to perform efficient\n   * range queries and updates.  Currently the tree is initialized to the base row\n   * height instead of the detail row height.\n   */\n  private treeArray: number[] = [];\n\n  /**\n   * Clear the Tree array.\n   */\n  clearCache(): void {\n    this.treeArray = [];\n  }\n\n  /**\n   * Initialize the Fenwick tree with row Heights.\n   *\n   * @param rows The array of rows which contain the expanded status.\n   * @param rowHeight The row height.\n   * @param detailRowHeight The detail row height.\n   */\n  initCache(details: any): void {\n    const { rows, rowHeight, detailRowHeight, externalVirtual, rowCount, rowIndexes, rowExpansions } = details;\n    const isFn = typeof rowHeight === 'function';\n    const isDetailFn = typeof detailRowHeight === 'function';\n\n    if (!isFn && isNaN(rowHeight)) {\n      throw new Error(`Row Height cache initialization failed. Please ensure that 'rowHeight' is a\n        valid number or function value: (${rowHeight}) when 'scrollbarV' is enabled.`);\n    }\n\n    // Add this additional guard in case detailRowHeight is set to 'auto' as it wont work.\n    if (!isDetailFn && isNaN(detailRowHeight)) {\n      throw new Error(`Row Height cache initialization failed. Please ensure that 'detailRowHeight' is a\n        valid number or function value: (${detailRowHeight}) when 'scrollbarV' is enabled.`);\n    }\n\n    const n = externalVirtual ? rowCount : rows.length;\n    this.treeArray = new Array(n);\n\n    for (let i = 0; i < n; ++i) {\n      this.treeArray[i] = 0;\n    }\n\n    for (let i = 0; i < n; ++i) {\n      const row = rows[i];\n      let currentRowHeight = rowHeight;\n      if (isFn) {\n        currentRowHeight = rowHeight(row);\n      }\n\n      // Add the detail row height to the already expanded rows.\n      // This is useful for the table that goes through a filter or sort.\n      const expanded = rowExpansions.has(row);\n      if (row && expanded) {\n        if (isDetailFn) {\n          const index = rowIndexes.get(row);\n          currentRowHeight += detailRowHeight(row, index);\n        } else {\n          currentRowHeight += detailRowHeight;\n        }\n      }\n\n      this.update(i, currentRowHeight);\n    }\n  }\n\n  /**\n   * Given the ScrollY position i.e. sum, provide the rowIndex\n   * that is present in the current view port.  Below handles edge cases.\n   */\n  getRowIndex(scrollY: number): number {\n    if (scrollY === 0) return 0;\n    return this.calcRowIndex(scrollY);\n  }\n\n  /**\n   * When a row is expanded or rowHeight is changed, update the height.  This can\n   * be utilized in future when Angular Data table supports dynamic row heights.\n   */\n  update(atRowIndex: number, byRowHeight: number): void {\n    if (!this.treeArray.length) {\n      throw new Error(`Update at index ${atRowIndex} with value ${byRowHeight} failed:\n        Row Height cache not initialized.`);\n    }\n\n    const n = this.treeArray.length;\n    atRowIndex |= 0;\n\n    while (atRowIndex < n) {\n      this.treeArray[atRowIndex] += byRowHeight;\n      atRowIndex |= atRowIndex + 1;\n    }\n  }\n\n  /**\n   * Range Sum query from 1 to the rowIndex\n   */\n  query(atIndex: number): number {\n    if (!this.treeArray.length) {\n      throw new Error(`query at index ${atIndex} failed: Fenwick tree array not initialized.`);\n    }\n\n    let sum = 0;\n    atIndex |= 0;\n\n    while (atIndex >= 0) {\n      sum += this.treeArray[atIndex];\n      atIndex = (atIndex & (atIndex + 1)) - 1;\n    }\n\n    return sum;\n  }\n\n  /**\n   * Find the total height between 2 row indexes\n   */\n  queryBetween(atIndexA: number, atIndexB: number): number {\n    return this.query(atIndexB) - this.query(atIndexA - 1);\n  }\n\n  /**\n   * Given the ScrollY position i.e. sum, provide the rowIndex\n   * that is present in the current view port.\n   */\n  private calcRowIndex(sum: number): number {\n    if (!this.treeArray.length) return 0;\n\n    let pos = -1;\n    const dataLength = this.treeArray.length;\n\n    // Get the highest bit for the block size.\n    const highestBit = Math.pow(2, dataLength.toString(2).length - 1);\n\n    for (let blockSize = highestBit; blockSize !== 0; blockSize >>= 1) {\n      const nextPos = pos + blockSize;\n      if (nextPos < dataLength && sum >= this.treeArray[nextPos]) {\n        sum -= this.treeArray[nextPos];\n        pos = nextPos;\n      }\n    }\n\n    return pos + 1;\n  }\n}\n","import { camelCase } from './camel-case';\n\nconst cache = {};\nconst testStyle = typeof document !== 'undefined' ? document.createElement('div').style : undefined;\n\n// Get Prefix\n// http://davidwalsh.name/vendor-prefix\nconst prefix = (function () {\n  const styles = typeof window !== 'undefined' ? window.getComputedStyle(document.documentElement, '') : undefined;\n  const match =\n    typeof styles !== 'undefined'\n      ? Array.prototype.slice\n          .call(styles)\n          .join('')\n          .match(/-(moz|webkit|ms)-/)\n      : null;\n  const pre = match !== null ? match[1] : undefined;\n  // tslint:disable-next-line: tsr-detect-non-literal-regexp\n  const dom = typeof pre !== 'undefined' ? 'WebKit|Moz|MS|O'.match(new RegExp('(' + pre + ')', 'i'))[1] : undefined;\n\n  return dom\n    ? {\n        dom,\n        lowercase: pre,\n        css: `-${pre}-`,\n        js: pre[0].toUpperCase() + pre.substr(1)\n      }\n    : undefined;\n})();\n\nexport function getVendorPrefixedName(property: string) {\n  const name = camelCase(property);\n\n  if (!cache[name]) {\n    if (prefix !== undefined && testStyle[prefix.css + property] !== undefined) {\n      cache[name] = prefix.css + property;\n    } else if (testStyle[property] !== undefined) {\n      cache[name] = property;\n    }\n  }\n\n  return cache[name];\n}\n","import { getVendorPrefixedName } from './prefixes';\nimport { camelCase } from './camel-case';\n\n// browser detection and prefixing tools\nconst transform = typeof window !== 'undefined' ? getVendorPrefixedName('transform') : undefined;\nconst backfaceVisibility = typeof window !== 'undefined' ? getVendorPrefixedName('backfaceVisibility') : undefined;\nconst hasCSSTransforms = typeof window !== 'undefined' ? !!getVendorPrefixedName('transform') : undefined;\nconst hasCSS3DTransforms = typeof window !== 'undefined' ? !!getVendorPrefixedName('perspective') : undefined;\nconst ua = typeof window !== 'undefined' ? window.navigator.userAgent : 'Chrome';\nconst isSafari = /Safari\\//.test(ua) && !/Chrome\\//.test(ua);\n\nexport function translateXY(styles: any, x: number, y: number) {\n  if (typeof transform !== 'undefined' && hasCSSTransforms) {\n    if (!isSafari && hasCSS3DTransforms) {\n      styles[transform] = `translate3d(${x}px, ${y}px, 0)`;\n      styles[backfaceVisibility] = 'hidden';\n    } else {\n      styles[camelCase(transform)] = `translate(${x}px, ${y}px)`;\n    }\n  } else {\n    styles.top = `${y}px`;\n    styles.left = `${x}px`;\n  }\n}\n","import {\n  Component,\n  Output,\n  EventEmitter,\n  Input,\n  HostBinding,\n  ChangeDetectorRef,\n  ViewChild,\n  OnInit,\n  OnDestroy,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { ScrollerComponent } from './scroller.component';\nimport { SelectionType } from '../../types/selection.type';\nimport { columnsByPin, columnGroupWidths } from '../../utils/column';\nimport { RowHeightCache } from '../../utils/row-height-cache';\nimport { translateXY } from '../../utils/translate';\n\n@Component({\n  selector: 'datatable-body',\n  template: `\n    <datatable-progress *ngIf=\"loadingIndicator\"> </datatable-progress>\n    <datatable-selection\n      #selector\n      [selected]=\"selected\"\n      [rows]=\"rows\"\n      [selectCheck]=\"selectCheck\"\n      [selectEnabled]=\"selectEnabled\"\n      [selectionType]=\"selectionType\"\n      [rowIdentity]=\"rowIdentity\"\n      (select)=\"select.emit($event)\"\n      (activate)=\"activate.emit($event)\"\n    >\n      <datatable-scroller\n        *ngIf=\"rows?.length\"\n        [scrollbarV]=\"scrollbarV\"\n        [scrollbarH]=\"scrollbarH\"\n        [scrollHeight]=\"scrollHeight\"\n        [scrollWidth]=\"columnGroupWidths?.total\"\n        (scroll)=\"onBodyScroll($event)\"\n      >\n        <datatable-summary-row\n          *ngIf=\"summaryRow && summaryPosition === 'top'\"\n          [rowHeight]=\"summaryHeight\"\n          [offsetX]=\"offsetX\"\n          [innerWidth]=\"innerWidth\"\n          [rows]=\"rows\"\n          [columns]=\"columns\"\n        >\n        </datatable-summary-row>\n        <datatable-row-wrapper\n          [groupedRows]=\"groupedRows\"\n          *ngFor=\"let group of temp; let i = index; trackBy: rowTrackingFn\"\n          [innerWidth]=\"innerWidth\"\n          [ngStyle]=\"getRowsStyles(group)\"\n          [rowDetail]=\"rowDetail\"\n          [groupHeader]=\"groupHeader\"\n          [offsetX]=\"offsetX\"\n          [detailRowHeight]=\"getDetailRowHeight(group && group[i], i)\"\n          [row]=\"group\"\n          [expanded]=\"getRowExpanded(group)\"\n          [rowIndex]=\"getRowIndex(group && group[i])\"\n          (rowContextmenu)=\"rowContextmenu.emit($event)\"\n        >\n          <datatable-body-row\n            *ngIf=\"!groupedRows; else groupedRowsTemplate\"\n            tabindex=\"-1\"\n            [isSelected]=\"selector.getRowSelected(group)\"\n            [innerWidth]=\"innerWidth\"\n            [offsetX]=\"offsetX\"\n            [columns]=\"columns\"\n            [rowHeight]=\"getRowHeight(group)\"\n            [row]=\"group\"\n            [rowIndex]=\"getRowIndex(group)\"\n            [expanded]=\"getRowExpanded(group)\"\n            [rowClass]=\"rowClass\"\n            [displayCheck]=\"displayCheck\"\n            [treeStatus]=\"group && group.treeStatus\"\n            (treeAction)=\"onTreeAction(group)\"\n            (activate)=\"selector.onActivate($event, indexes.first + i)\"\n          >\n          </datatable-body-row>\n          <ng-template #groupedRowsTemplate>\n            <datatable-body-row\n              *ngFor=\"let row of group.value; let i = index; trackBy: rowTrackingFn\"\n              tabindex=\"-1\"\n              [isSelected]=\"selector.getRowSelected(row)\"\n              [innerWidth]=\"innerWidth\"\n              [offsetX]=\"offsetX\"\n              [columns]=\"columns\"\n              [rowHeight]=\"getRowHeight(row)\"\n              [row]=\"row\"\n              [group]=\"group.value\"\n              [rowIndex]=\"getRowIndex(row)\"\n              [expanded]=\"getRowExpanded(row)\"\n              [rowClass]=\"rowClass\"\n              (activate)=\"selector.onActivate($event, i)\"\n            >\n            </datatable-body-row>\n          </ng-template>\n        </datatable-row-wrapper>\n        <datatable-summary-row\n          *ngIf=\"summaryRow && summaryPosition === 'bottom'\"\n          [ngStyle]=\"getBottomSummaryRowStyles()\"\n          [rowHeight]=\"summaryHeight\"\n          [offsetX]=\"offsetX\"\n          [innerWidth]=\"innerWidth\"\n          [rows]=\"rows\"\n          [columns]=\"columns\"\n        >\n        </datatable-summary-row>\n      </datatable-scroller>\n      <div class=\"empty-row\" *ngIf=\"!rows?.length && !loadingIndicator\" [innerHTML]=\"emptyMessage\"></div>\n    </datatable-selection>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    class: 'datatable-body'\n  }\n})\nexport class DataTableBodyComponent implements OnInit, OnDestroy {\n  @Input() scrollbarV: boolean;\n  @Input() scrollbarH: boolean;\n  @Input() loadingIndicator: boolean;\n  @Input() externalPaging: boolean;\n  @Input() rowHeight: number | 'auto' | ((row?: any) => number);\n  @Input() offsetX: number;\n  @Input() emptyMessage: string;\n  @Input() selectionType: SelectionType;\n  @Input() selected: any[] = [];\n  @Input() rowIdentity: any;\n  @Input() rowDetail: any;\n  @Input() groupHeader: any;\n  @Input() selectCheck: any;\n  @Input() displayCheck: any;\n  @Input() trackByProp: string;\n  @Input() rowClass: any;\n  @Input() groupedRows: any;\n  @Input() groupExpansionDefault: boolean;\n  @Input() innerWidth: number;\n  @Input() groupRowsBy: string;\n  @Input() virtualization: boolean;\n  @Input() summaryRow: boolean;\n  @Input() summaryPosition: string;\n  @Input() summaryHeight: number;\n\n  @Input() set pageSize(val: number) {\n    this._pageSize = val;\n    this.recalcLayout();\n  }\n\n  get pageSize(): number {\n    return this._pageSize;\n  }\n\n  @Input() set rows(val: any[]) {\n    this._rows = val;\n    this.recalcLayout();\n  }\n\n  get rows(): any[] {\n    return this._rows;\n  }\n\n  @Input() set columns(val: any[]) {\n    this._columns = val;\n    const colsByPin = columnsByPin(val);\n    this.columnGroupWidths = columnGroupWidths(colsByPin, val);\n  }\n\n  get columns(): any[] {\n    return this._columns;\n  }\n\n  @Input() set offset(val: number) {\n    this._offset = val;\n    if (!this.scrollbarV || (this.scrollbarV && !this.virtualization)) this.recalcLayout();\n  }\n\n  get offset(): number {\n    return this._offset;\n  }\n\n  @Input() set rowCount(val: number) {\n    this._rowCount = val;\n    this.recalcLayout();\n  }\n\n  get rowCount(): number {\n    return this._rowCount;\n  }\n\n  @HostBinding('style.width')\n  get bodyWidth(): string {\n    if (this.scrollbarH) {\n      return this.innerWidth + 'px';\n    } else {\n      return '100%';\n    }\n  }\n\n  @Input()\n  @HostBinding('style.height')\n  set bodyHeight(val) {\n    if (this.scrollbarV) {\n      this._bodyHeight = val + 'px';\n    } else {\n      this._bodyHeight = 'auto';\n    }\n\n    this.recalcLayout();\n  }\n\n  get bodyHeight() {\n    return this._bodyHeight;\n  }\n\n  @Output() scroll: EventEmitter<any> = new EventEmitter();\n  @Output() page: EventEmitter<any> = new EventEmitter();\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n  @Output() select: EventEmitter<any> = new EventEmitter();\n  @Output() detailToggle: EventEmitter<any> = new EventEmitter();\n  @Output() rowContextmenu = new EventEmitter<{ event: MouseEvent; row: any }>(false);\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\n\n  @ViewChild(ScrollerComponent) scroller: ScrollerComponent;\n\n  /**\n   * Returns if selection is enabled.\n   */\n  get selectEnabled(): boolean {\n    return !!this.selectionType;\n  }\n\n  /**\n   * Property that would calculate the height of scroll bar\n   * based on the row heights cache for virtual scroll and virtualization. Other scenarios\n   * calculate scroll height automatically (as height will be undefined).\n   */\n  get scrollHeight(): number | undefined {\n    if (this.scrollbarV && this.virtualization && this.rowCount) {\n      return this.rowHeightsCache.query(this.rowCount - 1);\n    }\n    // avoid TS7030: Not all code paths return a value.\n    return undefined;\n  }\n\n  rowHeightsCache: RowHeightCache = new RowHeightCache();\n  temp: any[] = [];\n  offsetY = 0;\n  indexes: any = {};\n  columnGroupWidths: any;\n  columnGroupWidthsWithoutGroup: any;\n  rowTrackingFn: any;\n  listener: any;\n  rowIndexes: any = new WeakMap<any, string>();\n  rowExpansions: any[] = [];\n\n  _rows: any[];\n  _bodyHeight: any;\n  _columns: any[];\n  _rowCount: number;\n  _offset: number;\n  _pageSize: number;\n\n  /**\n   * Creates an instance of DataTableBodyComponent.\n   */\n  constructor(private cd: ChangeDetectorRef) {\n    // declare fn here so we can get access to the `this` property\n    this.rowTrackingFn = (index: number, row: any): any => {\n      const idx = this.getRowIndex(row);\n      if (this.trackByProp) {\n        return row[this.trackByProp];\n      } else {\n        return idx;\n      }\n    };\n  }\n\n  /**\n   * Called after the constructor, initializing input properties\n   */\n  ngOnInit(): void {\n    if (this.rowDetail) {\n      this.listener = this.rowDetail.toggle.subscribe(({ type, value }: { type: string; value: any }) => {\n        if (type === 'row') {\n          this.toggleRowExpansion(value);\n        }\n        if (type === 'all') {\n          this.toggleAllRows(value);\n        }\n\n        // Refresh rows after toggle\n        // Fixes #883\n        this.updateIndexes();\n        this.updateRows();\n        this.cd.markForCheck();\n      });\n    }\n\n    if (this.groupHeader) {\n      this.listener = this.groupHeader.toggle.subscribe(({ type, value }: { type: string; value: any }) => {\n        if (type === 'group') {\n          this.toggleRowExpansion(value);\n        }\n        if (type === 'all') {\n          this.toggleAllRows(value);\n        }\n\n        // Refresh rows after toggle\n        // Fixes #883\n        this.updateIndexes();\n        this.updateRows();\n        this.cd.markForCheck();\n      });\n    }\n  }\n\n  /**\n   * Called once, before the instance is destroyed.\n   */\n  ngOnDestroy(): void {\n    if (this.rowDetail || this.groupHeader) {\n      this.listener.unsubscribe();\n    }\n  }\n\n  /**\n   * Updates the Y offset given a new offset.\n   */\n  updateOffsetY(offset?: number): void {\n    // scroller is missing on empty table\n    if (!this.scroller) {\n      return;\n    }\n\n    if (this.scrollbarV && this.virtualization && offset) {\n      // First get the row Index that we need to move to.\n      const rowIndex = this.pageSize * offset;\n      offset = this.rowHeightsCache.query(rowIndex - 1);\n    } else if (this.scrollbarV && !this.virtualization) {\n      offset = 0;\n    }\n\n    this.scroller.setOffset(offset || 0);\n  }\n\n  /**\n   * Body was scrolled, this is mainly useful for\n   * when a user is server-side pagination via virtual scroll.\n   */\n  onBodyScroll(event: any): void {\n    const scrollYPos: number = event.scrollYPos;\n    const scrollXPos: number = event.scrollXPos;\n\n    // if scroll change, trigger update\n    // this is mainly used for header cell positions\n    if (this.offsetY !== scrollYPos || this.offsetX !== scrollXPos) {\n      this.scroll.emit({\n        offsetY: scrollYPos,\n        offsetX: scrollXPos\n      });\n    }\n\n    this.offsetY = scrollYPos;\n    this.offsetX = scrollXPos;\n\n    this.updateIndexes();\n    this.updatePage(event.direction);\n    this.updateRows();\n  }\n\n  /**\n   * Updates the page given a direction.\n   */\n  updatePage(direction: string): void {\n    let offset = this.indexes.first / this.pageSize;\n\n    if (direction === 'up') {\n      offset = Math.ceil(offset);\n    } else if (direction === 'down') {\n      offset = Math.floor(offset);\n    }\n\n    if (direction !== undefined && !isNaN(offset)) {\n      this.page.emit({ offset });\n    }\n  }\n\n  /**\n   * Updates the rows in the view port\n   */\n  updateRows(): void {\n    const { first, last } = this.indexes;\n    let rowIndex = first;\n    let idx = 0;\n    const temp: any[] = [];\n\n    // if grouprowsby has been specified treat row paging\n    // parameters as group paging parameters ie if limit 10 has been\n    // specified treat it as 10 groups rather than 10 rows\n    if (this.groupedRows) {\n      let maxRowsPerGroup = 3;\n      // if there is only one group set the maximum number of\n      // rows per group the same as the total number of rows\n      if (this.groupedRows.length === 1) {\n        maxRowsPerGroup = this.groupedRows[0].value.length;\n      }\n\n      while (rowIndex < last && rowIndex < this.groupedRows.length) {\n        // Add the groups into this page\n        const group = this.groupedRows[rowIndex];\n        this.rowIndexes.set(group, rowIndex);\n\n        if (group.value) {\n          // add indexes for each group item\n          group.value.forEach((g: any, i: number) => {\n            const _idx = `${rowIndex}-${i}`;\n            this.rowIndexes.set(g, _idx);\n          });\n        }\n        temp[idx] = group;\n        idx++;\n\n        // Group index in this context\n        rowIndex++;\n      }\n    } else {\n      while (rowIndex < last && rowIndex < this.rowCount) {\n        const row = this.rows[rowIndex];\n\n        if (row) {\n          // add indexes for each row\n          this.rowIndexes.set(row, rowIndex);\n          temp[idx] = row;\n        }\n\n        idx++;\n        rowIndex++;\n      }\n    }\n\n    this.temp = temp;\n  }\n\n  /**\n   * Get the row height\n   */\n  getRowHeight(row: any): number {\n    // if its a function return it\n    if (typeof this.rowHeight === 'function') {\n      return this.rowHeight(row);\n    }\n\n    return this.rowHeight as number;\n  }\n\n  /**\n   * @param group the group with all rows\n   */\n  getGroupHeight(group: any): number {\n    let rowHeight = 0;\n\n    if (group.value) {\n      for (let index = 0; index < group.value.length; index++) {\n        rowHeight += this.getRowAndDetailHeight(group.value[index]);\n      }\n    }\n\n    return rowHeight;\n  }\n\n  /**\n   * Calculate row height based on the expanded state of the row.\n   */\n  getRowAndDetailHeight(row: any): number {\n    let rowHeight = this.getRowHeight(row);\n    const expanded = this.getRowExpanded(row);\n\n    // Adding detail row height if its expanded.\n    if (expanded) {\n      rowHeight += this.getDetailRowHeight(row);\n    }\n\n    return rowHeight;\n  }\n\n  /**\n   * Get the height of the detail row.\n   */\n  getDetailRowHeight = (row?: any, index?: any): number => {\n    if (!this.rowDetail) {\n      return 0;\n    }\n    const rowHeight = this.rowDetail.rowHeight;\n    return typeof rowHeight === 'function' ? rowHeight(row, index) : (rowHeight as number);\n  };\n\n  /**\n   * Calculates the styles for the row so that the rows can be moved in 2D space\n   * during virtual scroll inside the DOM.   In the below case the Y position is\n   * manipulated.   As an example, if the height of row 0 is 30 px and row 1 is\n   * 100 px then following styles are generated:\n   *\n   * transform: translate3d(0px, 0px, 0px);    ->  row0\n   * transform: translate3d(0px, 30px, 0px);   ->  row1\n   * transform: translate3d(0px, 130px, 0px);  ->  row2\n   *\n   * Row heights have to be calculated based on the row heights cache as we wont\n   * be able to determine which row is of what height before hand.  In the above\n   * case the positionY of the translate3d for row2 would be the sum of all the\n   * heights of the rows before it (i.e. row0 and row1).\n   *\n   * @param rows the row that needs to be placed in the 2D space.\n   * @returns the CSS3 style to be applied\n   *\n   * @memberOf DataTableBodyComponent\n   */\n  getRowsStyles(rows: any): any {\n    const styles: any = {};\n\n    // only add styles for the group if there is a group\n    if (this.groupedRows) {\n      styles.width = this.columnGroupWidths.total;\n    }\n\n    if (this.scrollbarV && this.virtualization) {\n      let idx = 0;\n\n      if (this.groupedRows) {\n        // Get the latest row rowindex in a group\n        const row = rows[rows.length - 1];\n        idx = row ? this.getRowIndex(row) : 0;\n      } else {\n        idx = this.getRowIndex(rows);\n      }\n\n      // const pos = idx * rowHeight;\n      // The position of this row would be the sum of all row heights\n      // until the previous row position.\n      const pos = this.rowHeightsCache.query(idx - 1);\n\n      translateXY(styles, 0, pos);\n    }\n\n    return styles;\n  }\n\n  /**\n   * Calculate bottom summary row offset for scrollbar mode.\n   * For more information about cache and offset calculation\n   * see description for `getRowsStyles` method\n   *\n   * @returns the CSS3 style to be applied\n   *\n   * @memberOf DataTableBodyComponent\n   */\n  getBottomSummaryRowStyles(): any {\n    if (!this.scrollbarV || !this.rows || !this.rows.length) {\n      return null;\n    }\n\n    const styles = { position: 'absolute' };\n    const pos = this.rowHeightsCache.query(this.rows.length - 1);\n\n    translateXY(styles, 0, pos);\n\n    return styles;\n  }\n\n  /**\n   * Hides the loading indicator\n   */\n  hideIndicator(): void {\n    setTimeout(() => (this.loadingIndicator = false), 500);\n  }\n\n  /**\n   * Updates the index of the rows in the viewport\n   */\n  updateIndexes(): void {\n    let first = 0;\n    let last = 0;\n\n    if (this.scrollbarV) {\n      if (this.virtualization) {\n        // Calculation of the first and last indexes will be based on where the\n        // scrollY position would be at.  The last index would be the one\n        // that shows up inside the view port the last.\n        const height = parseInt(this.bodyHeight, 0);\n        first = this.rowHeightsCache.getRowIndex(this.offsetY);\n        last = this.rowHeightsCache.getRowIndex(height + this.offsetY) + 1;\n      } else {\n        // If virtual rows are not needed\n        // We render all in one go\n        first = 0;\n        last = this.rowCount;\n      }\n    } else {\n      // The server is handling paging and will pass an array that begins with the\n      // element at a specified offset.  first should always be 0 with external paging.\n      if (!this.externalPaging) {\n        first = Math.max(this.offset * this.pageSize, 0);\n      }\n      last = Math.min(first + this.pageSize, this.rowCount);\n    }\n\n    this.indexes = { first, last };\n  }\n\n  /**\n   * Refreshes the full Row Height cache.  Should be used\n   * when the entire row array state has changed.\n   */\n  refreshRowHeightCache(): void {\n    if (!this.scrollbarV || (this.scrollbarV && !this.virtualization)) {\n      return;\n    }\n\n    // clear the previous row height cache if already present.\n    // this is useful during sorts, filters where the state of the\n    // rows array is changed.\n    this.rowHeightsCache.clearCache();\n\n    // Initialize the tree only if there are rows inside the tree.\n    if (this.rows && this.rows.length) {\n      const rowExpansions = new Set();\n      for (const row of this.rows) {\n        if (this.getRowExpanded(row)) {\n          rowExpansions.add(row);\n        }\n      }\n\n      this.rowHeightsCache.initCache({\n        rows: this.rows,\n        rowHeight: this.rowHeight,\n        detailRowHeight: this.getDetailRowHeight,\n        externalVirtual: this.scrollbarV && this.externalPaging,\n        rowCount: this.rowCount,\n        rowIndexes: this.rowIndexes,\n        rowExpansions\n      });\n    }\n  }\n\n  /**\n   * Gets the index for the view port\n   */\n  getAdjustedViewPortIndex(): number {\n    // Capture the row index of the first row that is visible on the viewport.\n    // If the scroll bar is just below the row which is highlighted then make that as the\n    // first index.\n    const viewPortFirstRowIndex = this.indexes.first;\n\n    if (this.scrollbarV && this.virtualization) {\n      const offsetScroll = this.rowHeightsCache.query(viewPortFirstRowIndex - 1);\n      return offsetScroll <= this.offsetY ? viewPortFirstRowIndex - 1 : viewPortFirstRowIndex;\n    }\n\n    return viewPortFirstRowIndex;\n  }\n\n  /**\n   * Toggle the Expansion of the row i.e. if the row is expanded then it will\n   * collapse and vice versa.   Note that the expanded status is stored as\n   * a part of the row object itself as we have to preserve the expanded row\n   * status in case of sorting and filtering of the row set.\n   */\n  toggleRowExpansion(row: any): void {\n    // Capture the row index of the first row that is visible on the viewport.\n    const viewPortFirstRowIndex = this.getAdjustedViewPortIndex();\n    const rowExpandedIdx = this.getRowExpandedIdx(row, this.rowExpansions);\n    const expanded = rowExpandedIdx > -1;\n\n    // If the detailRowHeight is auto --> only in case of non-virtualized scroll\n    if (this.scrollbarV && this.virtualization) {\n      const detailRowHeight = this.getDetailRowHeight(row) * (expanded ? -1 : 1);\n      // const idx = this.rowIndexes.get(row) || 0;\n      const idx = this.getRowIndex(row);\n      this.rowHeightsCache.update(idx, detailRowHeight);\n    }\n\n    // Update the toggled row and update thive nevere heights in the cache.\n    if (expanded) {\n      this.rowExpansions.splice(rowExpandedIdx, 1);\n    } else {\n      this.rowExpansions.push(row);\n    }\n\n    this.detailToggle.emit({\n      rows: [row],\n      currentIndex: viewPortFirstRowIndex\n    });\n  }\n\n  /**\n   * Expand/Collapse all the rows no matter what their state is.\n   */\n  toggleAllRows(expanded: boolean): void {\n    // clear prev expansions\n    this.rowExpansions = [];\n\n    // Capture the row index of the first row that is visible on the viewport.\n    const viewPortFirstRowIndex = this.getAdjustedViewPortIndex();\n\n    if (expanded) {\n      for (const row of this.rows) {\n        this.rowExpansions.push(row);\n      }\n    }\n\n    if (this.scrollbarV) {\n      // Refresh the full row heights cache since every row was affected.\n      this.recalcLayout();\n    }\n\n    // Emit all rows that have been expanded.\n    this.detailToggle.emit({\n      rows: this.rows,\n      currentIndex: viewPortFirstRowIndex\n    });\n  }\n\n  /**\n   * Recalculates the table\n   */\n  recalcLayout(): void {\n    this.refreshRowHeightCache();\n    this.updateIndexes();\n    this.updateRows();\n  }\n\n  /**\n   * Tracks the column\n   */\n  columnTrackingFn(index: number, column: any): any {\n    return column.$$id;\n  }\n\n  /**\n   * Gets the row pinning group styles\n   */\n  stylesByGroup(group: string) {\n    const widths = this.columnGroupWidths;\n    const offsetX = this.offsetX;\n\n    const styles = {\n      width: `${widths[group]}px`\n    };\n\n    if (group === 'left') {\n      translateXY(styles, offsetX, 0);\n    } else if (group === 'right') {\n      const bodyWidth = parseInt(this.innerWidth + '', 0);\n      const totalDiff = widths.total - bodyWidth;\n      const offsetDiff = totalDiff - offsetX;\n      const offset = offsetDiff * -1;\n      translateXY(styles, offset, 0);\n    }\n\n    return styles;\n  }\n\n  /**\n   * Returns if the row was expanded and set default row expansion when row expansion is empty\n   */\n  getRowExpanded(row: any): boolean {\n    if (this.rowExpansions.length === 0 && this.groupExpansionDefault) {\n      for (const group of this.groupedRows) {\n        this.rowExpansions.push(group);\n      }\n    }\n\n    return this.getRowExpandedIdx(row, this.rowExpansions) > -1;\n  }\n\n  getRowExpandedIdx(row: any, expanded: any[]): number {\n    if (!expanded || !expanded.length) return -1;\n\n    const rowId = this.rowIdentity(row);\n    return expanded.findIndex(r => {\n      const id = this.rowIdentity(r);\n      return id === rowId;\n    });\n  }\n\n  /**\n   * Gets the row index given a row\n   */\n  getRowIndex(row: any): number {\n    return this.rowIndexes.get(row) || 0;\n  }\n\n  onTreeAction(row: any) {\n    this.treeAction.emit({ row });\n  }\n}\n","export enum SortDirection {\n  asc = 'asc',\n  desc = 'desc'\n}\n","import {\n  Component,\n  Output,\n  EventEmitter,\n  Input,\n  HostBinding,\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  OnDestroy\n} from '@angular/core';\nimport { columnsByPin, columnGroupWidths, columnsByPinArr } from '../../utils/column';\nimport { SortType } from '../../types/sort.type';\nimport { SelectionType } from '../../types/selection.type';\nimport { DataTableColumnDirective } from '../columns/column.directive';\nimport { translateXY } from '../../utils/translate';\n\n@Component({\n  selector: 'datatable-header',\n  template: `\n    <div\n      orderable\n      (reorder)=\"onColumnReordered($event)\"\n      (targetChanged)=\"onTargetChanged($event)\"\n      [style.width.px]=\"_columnGroupWidths.total\"\n      class=\"datatable-header-inner\"\n    >\n      <div\n        *ngFor=\"let colGroup of _columnsByPin; trackBy: trackByGroups\"\n        [class]=\"'datatable-row-' + colGroup.type\"\n        [ngStyle]=\"_styleByGroup[colGroup.type]\"\n      >\n        <datatable-header-cell\n          *ngFor=\"let column of colGroup.columns; trackBy: columnTrackingFn\"\n          resizeable\n          [resizeEnabled]=\"column.resizeable\"\n          (resize)=\"onColumnResized($event, column)\"\n          long-press\n          [pressModel]=\"column\"\n          [pressEnabled]=\"reorderable && column.draggable\"\n          (longPressStart)=\"onLongPressStart($event)\"\n          (longPressEnd)=\"onLongPressEnd($event)\"\n          draggable\n          [dragX]=\"reorderable && column.draggable && column.dragging\"\n          [dragY]=\"false\"\n          [dragModel]=\"column\"\n          [dragEventTarget]=\"dragEventTarget\"\n          [headerHeight]=\"headerHeight\"\n          [isTarget]=\"column.isTarget\"\n          [targetMarkerTemplate]=\"targetMarkerTemplate\"\n          [targetMarkerContext]=\"column.targetMarkerContext\"\n          [column]=\"column\"\n          [sortType]=\"sortType\"\n          [sorts]=\"sorts\"\n          [selectionType]=\"selectionType\"\n          [sortAscendingIcon]=\"sortAscendingIcon\"\n          [sortDescendingIcon]=\"sortDescendingIcon\"\n          [sortUnsetIcon]=\"sortUnsetIcon\"\n          [allRowsSelected]=\"allRowsSelected\"\n          (sort)=\"onSort($event)\"\n          (select)=\"select.emit($event)\"\n          (columnContextmenu)=\"columnContextmenu.emit($event)\"\n        >\n        </datatable-header-cell>\n      </div>\n    </div>\n  `,\n  host: {\n    class: 'datatable-header'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableHeaderComponent implements OnDestroy {\n  @Input() sortAscendingIcon: any;\n  @Input() sortDescendingIcon: any;\n  @Input() sortUnsetIcon: any;\n  @Input() scrollbarH: boolean;\n  @Input() dealsWithGroup: boolean;\n  @Input() targetMarkerTemplate: any;\n\n  targetMarkerContext: any;\n\n  @Input() set innerWidth(val: number) {\n    this._innerWidth = val;\n    setTimeout(() => {\n      if (this._columns) {\n        const colByPin = columnsByPin(this._columns);\n        this._columnGroupWidths = columnGroupWidths(colByPin, this._columns);\n        this.setStylesByGroup();\n      }\n    });\n  }\n\n  get innerWidth(): number {\n    return this._innerWidth;\n  }\n\n  @Input() sorts: any[];\n  @Input() sortType: SortType;\n  @Input() allRowsSelected: boolean;\n  @Input() selectionType: SelectionType;\n  @Input() reorderable: boolean;\n\n  dragEventTarget: any;\n\n  @HostBinding('style.height')\n  @Input()\n  set headerHeight(val: any) {\n    if (val !== 'auto') {\n      this._headerHeight = `${val}px`;\n    } else {\n      this._headerHeight = val;\n    }\n  }\n\n  get headerHeight(): any {\n    return this._headerHeight;\n  }\n\n  @Input() set columns(val: any[]) {\n    this._columns = val;\n\n    const colsByPin = columnsByPin(val);\n    this._columnsByPin = columnsByPinArr(val);\n    setTimeout(() => {\n      this._columnGroupWidths = columnGroupWidths(colsByPin, val);\n      this.setStylesByGroup();\n    });\n  }\n\n  get columns(): any[] {\n    return this._columns;\n  }\n\n  @Input()\n  set offsetX(val: number) {\n    this._offsetX = val;\n    this.setStylesByGroup();\n  }\n  get offsetX() {\n    return this._offsetX;\n  }\n\n  @Output() sort: EventEmitter<any> = new EventEmitter();\n  @Output() reorder: EventEmitter<any> = new EventEmitter();\n  @Output() resize: EventEmitter<any> = new EventEmitter();\n  @Output() select: EventEmitter<any> = new EventEmitter();\n  @Output() columnContextmenu = new EventEmitter<{ event: MouseEvent; column: any }>(false);\n\n  _columnsByPin: any;\n  _columnGroupWidths: any = {\n    total: 100\n  };\n  _innerWidth: number;\n  _offsetX: number;\n  _columns: any[];\n  _headerHeight: string;\n  _styleByGroup: { [prop: string]: {} } = {\n    left: {},\n    center: {},\n    right: {}\n  };\n\n  private destroyed = false;\n\n  constructor(private cd: ChangeDetectorRef) {}\n\n  ngOnDestroy(): void {\n    this.destroyed = true;\n  }\n\n  onLongPressStart({ event, model }: { event: any; model: any }) {\n    model.dragging = true;\n    this.dragEventTarget = event;\n  }\n\n  onLongPressEnd({ event, model }: { event: any; model: any }) {\n    this.dragEventTarget = event;\n\n    // delay resetting so sort can be\n    // prevented if we were dragging\n    setTimeout(() => {\n      // datatable component creates copies from columns on reorder\n      // set dragging to false on new objects\n      const column = this._columns.find(c => c.$$id === model.$$id);\n      if (column) {\n        column.dragging = false;\n      }\n    }, 5);\n  }\n\n  @HostBinding('style.width')\n  get headerWidth(): string {\n    if (this.scrollbarH) {\n      return this.innerWidth + 'px';\n    }\n\n    return '100%';\n  }\n\n  trackByGroups(index: number, colGroup: any): any {\n    return colGroup.type;\n  }\n\n  columnTrackingFn(index: number, column: any): any {\n    return column.$$id;\n  }\n\n  onColumnResized(width: number, column: DataTableColumnDirective): void {\n    if (width <= column.minWidth) {\n      width = column.minWidth;\n    } else if (width >= column.maxWidth) {\n      width = column.maxWidth;\n    }\n\n    this.resize.emit({\n      column,\n      prevValue: column.width,\n      newValue: width\n    });\n  }\n\n  onColumnReordered({ prevIndex, newIndex, model }: any): void {\n    const column = this.getColumn(newIndex);\n    column.isTarget = false;\n    column.targetMarkerContext = undefined;\n    this.reorder.emit({\n      column: model,\n      prevValue: prevIndex,\n      newValue: newIndex\n    });\n  }\n\n  onTargetChanged({ prevIndex, newIndex, initialIndex }: any): void {\n    if (prevIndex || prevIndex === 0) {\n      const oldColumn = this.getColumn(prevIndex);\n      oldColumn.isTarget = false;\n      oldColumn.targetMarkerContext = undefined;\n    }\n    if (newIndex || newIndex === 0) {\n      const newColumn = this.getColumn(newIndex);\n      newColumn.isTarget = true;\n\n      if (initialIndex !== newIndex) {\n        newColumn.targetMarkerContext = {\n          class: 'targetMarker '.concat(initialIndex > newIndex ? 'dragFromRight' : 'dragFromLeft')\n        };\n      }\n    }\n  }\n\n  getColumn(index: number): any {\n    const leftColumnCount = this._columnsByPin[0].columns.length;\n    if (index < leftColumnCount) {\n      return this._columnsByPin[0].columns[index];\n    }\n\n    const centerColumnCount = this._columnsByPin[1].columns.length;\n    if (index < leftColumnCount + centerColumnCount) {\n      return this._columnsByPin[1].columns[index - leftColumnCount];\n    }\n\n    return this._columnsByPin[2].columns[index - leftColumnCount - centerColumnCount];\n  }\n\n  onSort({ column, prevValue, newValue }: any): void {\n    // if we are dragging don't sort!\n    if (column.dragging) {\n      return;\n    }\n\n    const sorts = this.calcNewSorts(column, prevValue, newValue);\n    this.sort.emit({\n      sorts,\n      column,\n      prevValue,\n      newValue\n    });\n  }\n\n  calcNewSorts(column: any, prevValue: number, newValue: number): any[] {\n    let idx = 0;\n\n    if (!this.sorts) {\n      this.sorts = [];\n    }\n\n    const sorts = this.sorts.map((s, i) => {\n      s = { ...s };\n      if (s.prop === column.prop) {\n        idx = i;\n      }\n      return s;\n    });\n\n    if (newValue === undefined) {\n      sorts.splice(idx, 1);\n    } else if (prevValue) {\n      sorts[idx].dir = newValue;\n    } else {\n      if (this.sortType === SortType.single) {\n        sorts.splice(0, this.sorts.length);\n      }\n\n      sorts.push({ dir: newValue, prop: column.prop });\n    }\n\n    return sorts;\n  }\n\n  setStylesByGroup() {\n    this._styleByGroup.left = this.calcStylesByGroup('left');\n    this._styleByGroup.center = this.calcStylesByGroup('center');\n    this._styleByGroup.right = this.calcStylesByGroup('right');\n    if (!this.destroyed) {\n      this.cd.detectChanges();\n    }\n  }\n\n  calcStylesByGroup(group: string): any {\n    const widths = this._columnGroupWidths;\n    const offsetX = this.offsetX;\n\n    const styles = {\n      width: `${widths[group]}px`\n    };\n\n    if (group === 'center') {\n      translateXY(styles, offsetX * -1, 0);\n    } else if (group === 'right') {\n      const totalDiff = widths.total - this.innerWidth;\n      const offset = totalDiff * -1;\n      translateXY(styles, offset, 0);\n    }\n\n    return styles;\n  }\n}\n","/**\n * Throttle a function\n */\nexport function throttle(func: any, wait: number, options?: any) {\n  options = options || {};\n  let context: any;\n  let args: any;\n  let result: any;\n  let timeout: any = null;\n  let previous = 0;\n\n  function later() {\n    previous = options.leading === false ? 0 : +new Date();\n    timeout = null;\n    result = func.apply(context, args);\n  }\n\n  return function (this: any) {\n    const now = +new Date();\n\n    if (!previous && options.leading === false) {\n      previous = now;\n    }\n\n    const remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n\n    if (remaining <= 0) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n\n    return result;\n  };\n}\n\n/**\n * Throttle decorator\n *\n *  class MyClass {\n *    throttleable(10)\n *    myFn() { ... }\n *  }\n */\nexport function throttleable(duration: number, options?: any) {\n  return function innerDecorator(target: any, key: PropertyKey, descriptor: PropertyDescriptor) {\n    return {\n      configurable: true,\n      enumerable: descriptor.enumerable,\n      get: function getter() {\n        Object.defineProperty(this, key, {\n          configurable: true,\n          enumerable: descriptor.enumerable,\n          value: throttle(descriptor.value, duration, options)\n        });\n\n        return this[key];\n      }\n    };\n  };\n}\n","import { columnsByPin, columnsTotalWidth } from './column';\n\n/**\n * Calculates the Total Flex Grow\n */\nexport function getTotalFlexGrow(columns: any[]) {\n  let totalFlexGrow = 0;\n\n  for (const c of columns) {\n    totalFlexGrow += c.flexGrow || 0;\n  }\n\n  return totalFlexGrow;\n}\n\n/**\n * Adjusts the column widths.\n * Inspired by: https://github.com/facebook/fixed-data-table/blob/master/src/FixedDataTableWidthHelper.js\n */\nexport function adjustColumnWidths(allColumns: any, expectedWidth: any) {\n  const columnsWidth = columnsTotalWidth(allColumns);\n  const totalFlexGrow = getTotalFlexGrow(allColumns);\n  const colsByGroup = columnsByPin(allColumns);\n\n  if (columnsWidth !== expectedWidth) {\n    scaleColumns(colsByGroup, expectedWidth, totalFlexGrow);\n  }\n}\n\n/**\n * Resizes columns based on the flexGrow property, while respecting manually set widths\n */\nfunction scaleColumns(colsByGroup: any, maxWidth: any, totalFlexGrow: any) {\n  // calculate total width and flexgrow points for coulumns that can be resized\n  for (const attr in colsByGroup) {\n    for (const column of colsByGroup[attr]) {\n      if (!column.canAutoResize) {\n        maxWidth -= column.width;\n        totalFlexGrow -= column.flexGrow ? column.flexGrow : 0;\n      } else {\n        column.width = 0;\n      }\n    }\n  }\n\n  const hasMinWidth = {};\n  let remainingWidth = maxWidth;\n\n  // resize columns until no width is left to be distributed\n  do {\n    const widthPerFlexPoint = remainingWidth / totalFlexGrow;\n    remainingWidth = 0;\n\n    for (const attr in colsByGroup) {\n      for (const column of colsByGroup[attr]) {\n        // if the column can be resize and it hasn't reached its minimum width yet\n        if (column.canAutoResize && !hasMinWidth[column.prop]) {\n          const newWidth = column.width + column.flexGrow * widthPerFlexPoint;\n          if (column.minWidth !== undefined && newWidth < column.minWidth) {\n            remainingWidth += newWidth - column.minWidth;\n            column.width = column.minWidth;\n            hasMinWidth[column.prop] = true;\n          } else {\n            column.width = newWidth;\n          }\n        }\n      }\n    }\n  } while (remainingWidth !== 0);\n}\n\n/**\n * Forces the width of the columns to\n * distribute equally but overflowing when necessary\n *\n * Rules:\n *\n *  - If combined withs are less than the total width of the grid,\n *    proportion the widths given the min / max / normal widths to fill the width.\n *\n *  - If the combined widths, exceed the total width of the grid,\n *    use the standard widths.\n *\n *  - If a column is resized, it should always use that width\n *\n *  - The proportional widths should never fall below min size if specified.\n *\n *  - If the grid starts off small but then becomes greater than the size ( + / - )\n *    the width should use the original width; not the newly proportioned widths.\n */\nexport function forceFillColumnWidths(\n  allColumns: any[],\n  expectedWidth: number,\n  startIdx: number,\n  allowBleed: boolean,\n  defaultColWidth: number = 300\n) {\n  const columnsToResize = allColumns.slice(startIdx + 1, allColumns.length).filter(c => {\n    return c.canAutoResize !== false;\n  });\n\n  for (const column of columnsToResize) {\n    if (!column.$$oldWidth) {\n      column.$$oldWidth = column.width;\n    }\n  }\n\n  let additionWidthPerColumn = 0;\n  let exceedsWindow = false;\n  let contentWidth = getContentWidth(allColumns, defaultColWidth);\n  let remainingWidth = expectedWidth - contentWidth;\n  const columnsProcessed: any[] = [];\n  const remainingWidthLimit = 1; // when to stop\n\n  // This loop takes care of the\n  do {\n    additionWidthPerColumn = remainingWidth / columnsToResize.length;\n    exceedsWindow = contentWidth >= expectedWidth;\n\n    for (const column of columnsToResize) {\n      if (exceedsWindow && allowBleed) {\n        column.width = column.$$oldWidth || column.width || defaultColWidth;\n      } else {\n        const newSize = (column.width || defaultColWidth) + additionWidthPerColumn;\n\n        if (column.minWidth && newSize < column.minWidth) {\n          column.width = column.minWidth;\n          columnsProcessed.push(column);\n        } else if (column.maxWidth && newSize > column.maxWidth) {\n          column.width = column.maxWidth;\n          columnsProcessed.push(column);\n        } else {\n          column.width = newSize;\n        }\n      }\n\n      column.width = Math.max(0, column.width);\n    }\n\n    contentWidth = getContentWidth(allColumns);\n    remainingWidth = expectedWidth - contentWidth;\n    removeProcessedColumns(columnsToResize, columnsProcessed);\n  } while (remainingWidth > remainingWidthLimit && columnsToResize.length !== 0);\n}\n\n/**\n * Remove the processed columns from the current active columns.\n */\nfunction removeProcessedColumns(columnsToResize: any[], columnsProcessed: any[]) {\n  for (const column of columnsProcessed) {\n    const index = columnsToResize.indexOf(column);\n    columnsToResize.splice(index, 1);\n  }\n}\n\n/**\n * Gets the width of the columns\n */\nfunction getContentWidth(allColumns: any, defaultColWidth: number = 300): number {\n  let contentWidth = 0;\n\n  for (const column of allColumns) {\n    contentWidth += column.width || defaultColWidth;\n  }\n\n  return contentWidth;\n}\n","import { getterForProp } from './column-prop-getters';\nimport { SortType } from '../types/sort.type';\nimport { SortDirection } from '../types/sort-direction.type';\nimport { SortPropDir } from '../types/sort-prop-dir.type';\n/**\n * Gets the next sort direction\n */\nexport function nextSortDir(sortType: SortType, current: SortDirection): SortDirection | undefined {\n  if (sortType === SortType.single) {\n    if (current === SortDirection.asc) {\n      return SortDirection.desc;\n    } else {\n      return SortDirection.asc;\n    }\n  } else {\n    if (!current) {\n      return SortDirection.asc;\n    } else if (current === SortDirection.asc) {\n      return SortDirection.desc;\n    } else if (current === SortDirection.desc) {\n      return undefined;\n    }\n    // avoid TS7030: Not all code paths return a value.\n    return undefined;\n  }\n}\n\n/**\n * Adapted from fueld-ui on 6/216\n * https://github.com/FuelInteractive/fuel-ui/tree/master/src/pipes/OrderBy\n */\nexport function orderByComparator(a: any, b: any): number {\n  if (a === null || typeof a === 'undefined') a = 0;\n  if (b === null || typeof b === 'undefined') b = 0;\n  if (a instanceof Date && b instanceof Date) {\n    if (a < b) return -1;\n    if (a > b) return 1;\n  } else if (isNaN(parseFloat(a)) || !isFinite(a) || isNaN(parseFloat(b)) || !isFinite(b)) {\n    // Convert to string in case of a=0 or b=0\n    a = String(a);\n    b = String(b);\n    // Isn't a number so lowercase the string to properly compare\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\n    if (a.toLowerCase() > b.toLowerCase()) return 1;\n  } else {\n    // Parse strings as numbers to compare properly\n    if (parseFloat(a) < parseFloat(b)) return -1;\n    if (parseFloat(a) > parseFloat(b)) return 1;\n  }\n\n  // equal each other\n  return 0;\n}\n\n/**\n * creates a shallow copy of the `rows` input and returns the sorted copy. this function\n * does not sort the `rows` argument in place\n */\nexport function sortRows(rows: any[], columns: any[], dirs: SortPropDir[]): any[] {\n  if (!rows) return [];\n  if (!dirs || !dirs.length || !columns) return [...rows];\n\n  /**\n   * record the row ordering of results from prior sort operations (if applicable)\n   * this is necessary to guarantee stable sorting behavior\n   */\n  const rowToIndexMap = new Map<any, number>();\n  rows.forEach((row, index) => rowToIndexMap.set(row, index));\n\n  const temp = [...rows];\n  const cols = columns.reduce((obj, col) => {\n    if (col.comparator && typeof col.comparator === 'function') {\n      obj[col.prop] = col.comparator;\n    }\n    return obj;\n  }, {});\n\n  // cache valueGetter and compareFn so that they\n  // do not need to be looked-up in the sort function body\n  const cachedDirs = dirs.map(dir => {\n    const prop = dir.prop;\n    return {\n      prop,\n      dir: dir.dir,\n      valueGetter: getterForProp(prop),\n      compareFn: cols[prop] || orderByComparator\n    };\n  });\n\n  return temp.sort(function (rowA: any, rowB: any) {\n    for (const cachedDir of cachedDirs) {\n      // Get property and valuegetters for column to be sorted\n      const { prop, valueGetter } = cachedDir;\n      // Get A and B cell values from rows based on properties of the columns\n      const propA = valueGetter(rowA, prop);\n      const propB = valueGetter(rowB, prop);\n\n      // Compare function gets five parameters:\n      // Two cell values to be compared as propA and propB\n      // Two rows corresponding to the cells as rowA and rowB\n      // Direction of the sort for this column as SortDirection\n      // Compare can be a standard JS comparison function (a,b) => -1|0|1\n      // as additional parameters are silently ignored. The whole row and sort\n      // direction enable more complex sort logic.\n      const comparison =\n        cachedDir.dir !== SortDirection.desc\n          ? cachedDir.compareFn(propA, propB, rowA, rowB, cachedDir.dir)\n          : -cachedDir.compareFn(propA, propB, rowA, rowB, cachedDir.dir);\n\n      // Don't return 0 yet in case of needing to sort by next property\n      if (comparison !== 0) return comparison;\n    }\n\n    if (!(rowToIndexMap.has(rowA) && rowToIndexMap.has(rowB))) return 0;\n\n    /**\n     * all else being equal, preserve original order of the rows (stable sort)\n     */\n    return rowToIndexMap.get(rowA) < rowToIndexMap.get(rowB) ? -1 : 1;\n  });\n}\n","import {\n  Component,\n  Input,\n  Output,\n  ElementRef,\n  EventEmitter,\n  ViewChild,\n  HostListener,\n  ContentChildren,\n  OnInit,\n  QueryList,\n  AfterViewInit,\n  HostBinding,\n  ContentChild,\n  DoCheck,\n  KeyValueDiffers,\n  KeyValueDiffer,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  SkipSelf,\n  Optional,\n  Inject\n} from '@angular/core';\n\nimport { DatatableGroupHeaderDirective } from './body/body-group-header.directive';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { INgxDatatableConfig } from '../ngx-datatable.module';\nimport { groupRowsByParents, optionalGetterForProp } from '../utils/tree';\nimport { TableColumn } from '../types/table-column.type';\nimport { setColumnDefaults, translateTemplates } from '../utils/column-helper';\nimport { ColumnMode } from '../types/column-mode.type';\nimport { SelectionType } from '../types/selection.type';\nimport { SortType } from '../types/sort.type';\nimport { ContextmenuType } from '../types/contextmenu.type';\nimport { DataTableColumnDirective } from './columns/column.directive';\nimport { DatatableRowDetailDirective } from './row-detail/row-detail.directive';\nimport { DatatableFooterDirective } from './footer/footer.directive';\nimport { DataTableBodyComponent } from './body/body.component';\nimport { DataTableHeaderComponent } from './header/header.component';\nimport { ScrollbarHelper } from '../services/scrollbar-helper.service';\nimport { ColumnChangesService } from '../services/column-changes.service';\nimport { DimensionsHelper } from '../services/dimensions-helper.service';\nimport { throttleable } from '../utils/throttle';\nimport { forceFillColumnWidths, adjustColumnWidths } from '../utils/math';\nimport { sortRows } from '../utils/sort';\n\n@Component({\n  selector: 'ngx-datatable',\n  templateUrl: './datatable.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./datatable.component.scss'],\n  host: {\n    class: 'ngx-datatable'\n  }\n})\nexport class DatatableComponent implements OnInit, DoCheck, AfterViewInit {\n  /**\n   * Template for the target marker of drag target columns.\n   */\n  @Input() targetMarkerTemplate: any;\n\n  /**\n   * Rows that are displayed in the table.\n   */\n  @Input() set rows(val: any) {\n    this._rows = val;\n\n    if (val) {\n      this._internalRows = [...val];\n    }\n\n    // auto sort on new updates\n    if (!this.externalSorting) {\n      this.sortInternalRows();\n    }\n\n    // auto group by parent on new update\n    this._internalRows = groupRowsByParents(\n      this._internalRows,\n      optionalGetterForProp(this.treeFromRelation),\n      optionalGetterForProp(this.treeToRelation)\n    );\n\n    // recalculate sizes/etc\n    this.recalculate();\n\n    if (this._rows && this._groupRowsBy) {\n      // If a column has been specified in _groupRowsBy created a new array with the data grouped by that row\n      this.groupedRows = this.groupArrayBy(this._rows, this._groupRowsBy);\n    }\n\n    this.cd.markForCheck();\n  }\n\n  /**\n   * Gets the rows.\n   */\n  get rows(): any {\n    return this._rows;\n  }\n\n  /**\n   * This attribute allows the user to set the name of the column to group the data with\n   */\n  @Input() set groupRowsBy(val: string) {\n    if (val) {\n      this._groupRowsBy = val;\n      if (this._rows && this._groupRowsBy) {\n        // cretes a new array with the data grouped\n        this.groupedRows = this.groupArrayBy(this._rows, this._groupRowsBy);\n      }\n    }\n  }\n\n  get groupRowsBy() {\n    return this._groupRowsBy;\n  }\n\n  /**\n   * This attribute allows the user to set a grouped array in the following format:\n   *  [\n   *    {groupid=1} [\n   *      {id=1 name=\"test1\"},\n   *      {id=2 name=\"test2\"},\n   *      {id=3 name=\"test3\"}\n   *    ]},\n   *    {groupid=2>[\n   *      {id=4 name=\"test4\"},\n   *      {id=5 name=\"test5\"},\n   *      {id=6 name=\"test6\"}\n   *    ]}\n   *  ]\n   */\n  @Input() groupedRows: any[];\n\n  /**\n   * Columns to be displayed.\n   */\n  @Input() set columns(val: TableColumn[]) {\n    if (val) {\n      this._internalColumns = [...val];\n      setColumnDefaults(this._internalColumns);\n      this.recalculateColumns();\n    }\n\n    this._columns = val;\n  }\n\n  /**\n   * Get the columns.\n   */\n  get columns(): TableColumn[] {\n    return this._columns;\n  }\n\n  /**\n   * List of row objects that should be\n   * represented as selected in the grid.\n   * Default value: `[]`\n   */\n  @Input() selected: any[] = [];\n\n  /**\n   * Enable vertical scrollbars\n   */\n  @Input() scrollbarV: boolean = false;\n\n  /**\n   * Enable horz scrollbars\n   */\n  @Input() scrollbarH: boolean = false;\n\n  /**\n   * The row height; which is necessary\n   * to calculate the height for the lazy rendering.\n   */\n  @Input() rowHeight: number | 'auto' | ((row?: any) => number) = 30;\n\n  /**\n   * Type of column width distribution formula.\n   * Example: flex, force, standard\n   */\n  @Input() columnMode: ColumnMode | keyof typeof ColumnMode = ColumnMode.standard;\n\n  /**\n   * The minimum header height in pixels.\n   * Pass a falsey for no header\n   */\n  @Input() headerHeight: number = 30;\n\n  /**\n   * The minimum footer height in pixels.\n   * Pass falsey for no footer\n   */\n  @Input() footerHeight: number = 0;\n\n  /**\n   * If the table should use external paging\n   * otherwise its assumed that all data is preloaded.\n   */\n  @Input() externalPaging: boolean = false;\n\n  /**\n   * If the table should use external sorting or\n   * the built-in basic sorting.\n   */\n  @Input() externalSorting: boolean = false;\n\n  /**\n   * The page size to be shown.\n   * Default value: `undefined`\n   */\n  @Input() set limit(val: number | undefined) {\n    this._limit = val;\n\n    // recalculate sizes/etc\n    this.recalculate();\n  }\n\n  /**\n   * Gets the limit.\n   */\n  get limit(): number | undefined {\n    return this._limit;\n  }\n\n  /**\n   * The total count of all rows.\n   * Default value: `0`\n   */\n  @Input() set count(val: number) {\n    this._count = val;\n\n    // recalculate sizes/etc\n    this.recalculate();\n  }\n\n  /**\n   * Gets the count.\n   */\n  get count(): number {\n    return this._count;\n  }\n\n  /**\n   * The current offset ( page - 1 ) shown.\n   * Default value: `0`\n   */\n  @Input() set offset(val: number) {\n    this._offset = val;\n  }\n  get offset(): number {\n    return Math.max(Math.min(this._offset, Math.ceil(this.rowCount / this.pageSize) - 1), 0);\n  }\n\n  /**\n   * Show the linear loading bar.\n   * Default value: `false`\n   */\n  @Input() loadingIndicator: boolean = false;\n\n  /**\n   * Type of row selection. Options are:\n   *\n   *  - `single`\n   *  - `multi`\n   *  - `checkbox`\n   *  - `multiClick`\n   *  - `cell`\n   *\n   * For no selection pass a `falsey`.\n   * Default value: `undefined`\n   */\n  @Input() selectionType: SelectionType;\n\n  /**\n   * Enable/Disable ability to re-order columns\n   * by dragging them.\n   */\n  @Input() reorderable: boolean = true;\n\n  /**\n   * Swap columns on re-order columns or\n   * move them.\n   */\n  @Input() swapColumns: boolean = true;\n\n  /**\n   * The type of sorting\n   */\n  @Input() sortType: SortType = SortType.single;\n\n  /**\n   * Array of sorted columns by property and type.\n   * Default value: `[]`\n   */\n  @Input() sorts: any[] = [];\n\n  /**\n   * Css class overrides\n   */\n  @Input() cssClasses: any = {\n    sortAscending: 'datatable-icon-up',\n    sortDescending: 'datatable-icon-down',\n    sortUnset: 'datatable-icon-sort-unset',\n    pagerLeftArrow: 'datatable-icon-left',\n    pagerRightArrow: 'datatable-icon-right',\n    pagerPrevious: 'datatable-icon-prev',\n    pagerNext: 'datatable-icon-skip'\n  };\n\n  /**\n   * Message overrides for localization\n   *\n   * emptyMessage     [default] = 'No data to display'\n   * totalMessage     [default] = 'total'\n   * selectedMessage  [default] = 'selected'\n   */\n  @Input() messages: any = {\n    // Message to show when array is presented\n    // but contains no values\n    emptyMessage: 'No data to display',\n\n    // Footer total message\n    totalMessage: 'total',\n\n    // Footer selected message\n    selectedMessage: 'selected'\n  };\n\n  /**\n   * Row specific classes.\n   * Similar implementation to ngClass.\n   *\n   *  [rowClass]=\"'first second'\"\n   *  [rowClass]=\"{ 'first': true, 'second': true, 'third': false }\"\n   */\n  @Input() rowClass: any;\n\n  /**\n   * A boolean/function you can use to check whether you want\n   * to select a particular row based on a criteria. Example:\n   *\n   *    (selection) => {\n   *      return selection !== 'Ethel Price';\n   *    }\n   */\n  @Input() selectCheck: any;\n\n  /**\n   * A function you can use to check whether you want\n   * to show the checkbox for a particular row based on a criteria. Example:\n   *\n   *    (row, column, value) => {\n   *      return row.name !== 'Ethel Price';\n   *    }\n   */\n  @Input() displayCheck: (row: any, column?: any, value?: any) => boolean;\n\n  /**\n   * A boolean you can use to set the detault behaviour of rows and groups\n   * whether they will start expanded or not. If ommited the default is NOT expanded.\n   *\n   */\n  @Input() groupExpansionDefault: boolean = false;\n\n  /**\n   * Property to which you can use for custom tracking of rows.\n   * Example: 'name'\n   */\n  @Input() trackByProp: string;\n\n  /**\n   * Property to which you can use for determining select all\n   * rows on current page or not.\n   *\n   * @memberOf DatatableComponent\n   */\n  @Input() selectAllRowsOnPage = false;\n\n  /**\n   * A flag for row virtualization on / off\n   */\n  @Input() virtualization: boolean = true;\n\n  /**\n   * Tree from relation\n   */\n  @Input() treeFromRelation: string;\n\n  /**\n   * Tree to relation\n   */\n  @Input() treeToRelation: string;\n\n  /**\n   * A flag for switching summary row on / off\n   */\n  @Input() summaryRow: boolean = false;\n\n  /**\n   * A height of summary row\n   */\n  @Input() summaryHeight: number = 30;\n\n  /**\n   * A property holds a summary row position: top/bottom\n   */\n  @Input() summaryPosition: string = 'top';\n\n  /**\n   * Body was scrolled typically in a `scrollbarV:true` scenario.\n   */\n  @Output() scroll: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * A cell or row was focused via keyboard or mouse click.\n   */\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * A cell or row was selected.\n   */\n  @Output() select: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Column sort was invoked.\n   */\n  @Output() sort: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * The table was paged either triggered by the pager or the body scroll.\n   */\n  @Output() page: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Columns were re-ordered.\n   */\n  @Output() reorder: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Column was resized.\n   */\n  @Output() resize: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * The context menu was invoked on the table.\n   * type indicates whether the header or the body was clicked.\n   * content contains either the column or the row that was clicked.\n   */\n  @Output() tableContextmenu = new EventEmitter<{ event: MouseEvent; type: ContextmenuType; content: any }>(false);\n\n  /**\n   * A row was expanded ot collapsed for tree\n   */\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * CSS class applied if the header height if fixed height.\n   */\n  @HostBinding('class.fixed-header')\n  get isFixedHeader(): boolean {\n    const headerHeight: number | string = this.headerHeight;\n    return typeof headerHeight === 'string' ? <string>headerHeight !== 'auto' : true;\n  }\n\n  /**\n   * CSS class applied to the root element if\n   * the row heights are fixed heights.\n   */\n  @HostBinding('class.fixed-row')\n  get isFixedRow(): boolean {\n    return this.rowHeight !== 'auto';\n  }\n\n  /**\n   * CSS class applied to root element if\n   * vertical scrolling is enabled.\n   */\n  @HostBinding('class.scroll-vertical')\n  get isVertScroll(): boolean {\n    return this.scrollbarV;\n  }\n\n  /**\n   * CSS class applied to root element if\n   * virtualization is enabled.\n   */\n  @HostBinding('class.virtualized')\n  get isVirtualized(): boolean {\n    return this.virtualization;\n  }\n\n  /**\n   * CSS class applied to the root element\n   * if the horziontal scrolling is enabled.\n   */\n  @HostBinding('class.scroll-horz')\n  get isHorScroll(): boolean {\n    return this.scrollbarH;\n  }\n\n  /**\n   * CSS class applied to root element is selectable.\n   */\n  @HostBinding('class.selectable')\n  get isSelectable(): boolean {\n    return this.selectionType !== undefined;\n  }\n\n  /**\n   * CSS class applied to root is checkbox selection.\n   */\n  @HostBinding('class.checkbox-selection')\n  get isCheckboxSelection(): boolean {\n    return this.selectionType === SelectionType.checkbox;\n  }\n\n  /**\n   * CSS class applied to root if cell selection.\n   */\n  @HostBinding('class.cell-selection')\n  get isCellSelection(): boolean {\n    return this.selectionType === SelectionType.cell;\n  }\n\n  /**\n   * CSS class applied to root if single select.\n   */\n  @HostBinding('class.single-selection')\n  get isSingleSelection(): boolean {\n    return this.selectionType === SelectionType.single;\n  }\n\n  /**\n   * CSS class added to root element if mulit select\n   */\n  @HostBinding('class.multi-selection')\n  get isMultiSelection(): boolean {\n    return this.selectionType === SelectionType.multi;\n  }\n\n  /**\n   * CSS class added to root element if mulit click select\n   */\n  @HostBinding('class.multi-click-selection')\n  get isMultiClickSelection(): boolean {\n    return this.selectionType === SelectionType.multiClick;\n  }\n\n  /**\n   * Column templates gathered from `ContentChildren`\n   * if described in your markup.\n   */\n  @ContentChildren(DataTableColumnDirective)\n  set columnTemplates(val: QueryList<DataTableColumnDirective>) {\n    this._columnTemplates = val;\n    this.translateColumns(val);\n  }\n\n  /**\n   * Returns the column templates.\n   */\n  get columnTemplates(): QueryList<DataTableColumnDirective> {\n    return this._columnTemplates;\n  }\n\n  /**\n   * Row Detail templates gathered from the ContentChild\n   */\n  @ContentChild(DatatableRowDetailDirective)\n  rowDetail: DatatableRowDetailDirective;\n\n  /**\n   * Group Header templates gathered from the ContentChild\n   */\n  @ContentChild(DatatableGroupHeaderDirective)\n  groupHeader: DatatableGroupHeaderDirective;\n\n  /**\n   * Footer template gathered from the ContentChild\n   */\n  @ContentChild(DatatableFooterDirective)\n  footer: DatatableFooterDirective;\n\n  /**\n   * Reference to the body component for manually\n   * invoking functions on the body.\n   */\n  @ViewChild(DataTableBodyComponent)\n  bodyComponent: DataTableBodyComponent;\n\n  /**\n   * Reference to the header component for manually\n   * invoking functions on the header.\n   *\n   * @memberOf DatatableComponent\n   */\n  @ViewChild(DataTableHeaderComponent)\n  headerComponent: DataTableHeaderComponent;\n\n  /**\n   * Returns if all rows are selected.\n   */\n  get allRowsSelected(): boolean {\n    let allRowsSelected = this.rows && this.selected && this.selected.length === this.rows.length;\n\n    if (this.bodyComponent && this.selectAllRowsOnPage) {\n      const indexes = this.bodyComponent.indexes;\n      const rowsOnPage = indexes.last - indexes.first;\n      allRowsSelected = this.selected.length === rowsOnPage;\n    }\n\n    return this.selected && this.rows && this.rows.length !== 0 && allRowsSelected;\n  }\n\n  element: HTMLElement;\n  _innerWidth: number;\n  pageSize: number;\n  bodyHeight: number;\n  rowCount: number = 0;\n  rowDiffer: KeyValueDiffer<{}, {}>;\n\n  _offsetX = new BehaviorSubject(0);\n  _limit: number | undefined;\n  _count: number = 0;\n  _offset: number = 0;\n  _rows: any[];\n  _groupRowsBy: string;\n  _internalRows: any[];\n  _internalColumns: TableColumn[];\n  _columns: TableColumn[];\n  _columnTemplates: QueryList<DataTableColumnDirective>;\n  _subscriptions: Subscription[] = [];\n\n  constructor(\n    @SkipSelf() private scrollbarHelper: ScrollbarHelper,\n    @SkipSelf() private dimensionsHelper: DimensionsHelper,\n    private cd: ChangeDetectorRef,\n    element: ElementRef,\n    differs: KeyValueDiffers,\n    private columnChangesService: ColumnChangesService,\n    @Optional() @Inject('configuration') private configuration: INgxDatatableConfig\n  ) {\n    // get ref to elm for measuring\n    this.element = element.nativeElement;\n    this.rowDiffer = differs.find({}).create();\n\n    // apply global settings from Module.forRoot\n    if (this.configuration && this.configuration.messages) {\n      this.messages = { ...this.configuration.messages };\n    }\n  }\n\n  /**\n   * Lifecycle hook that is called after data-bound\n   * properties of a directive are initialized.\n   */\n  ngOnInit(): void {\n    // need to call this immediatly to size\n    // if the table is hidden the visibility\n    // listener will invoke this itself upon show\n    this.recalculate();\n  }\n\n  /**\n   * Lifecycle hook that is called after a component's\n   * view has been fully initialized.\n   */\n  ngAfterViewInit(): void {\n    if (!this.externalSorting) {\n      this.sortInternalRows();\n    }\n\n    // this has to be done to prevent the change detection\n    // tree from freaking out because we are readjusting\n    if (typeof requestAnimationFrame === 'undefined') {\n      return;\n    }\n\n    requestAnimationFrame(() => {\n      this.recalculate();\n\n      // emit page for virtual server-side kickoff\n      if (this.externalPaging && this.scrollbarV) {\n        this.page.emit({\n          count: this.count,\n          pageSize: this.pageSize,\n          limit: this.limit,\n          offset: 0\n        });\n      }\n    });\n  }\n\n  /**\n   * Lifecycle hook that is called after a component's\n   * content has been fully initialized.\n   */\n  ngAfterContentInit() {\n    this.columnTemplates.changes.subscribe(v => this.translateColumns(v));\n    this.listenForColumnInputChanges();\n  }\n\n  /**\n   * This will be used when displaying or selecting rows.\n   * when tracking/comparing them, we'll use the value of this fn,\n   *\n   * (`fn(x) === fn(y)` instead of `x === y`)\n   */\n  @Input() rowIdentity: (x: any) => any = (x: any) => {\n    if (this._groupRowsBy) {\n      // each group in groupedRows are stored as {key, value: [rows]},\n      // where key is the groupRowsBy index\n      return x.key;\n    } else {\n      return x;\n    }\n  };\n\n  /**\n   * Translates the templates to the column objects\n   */\n  translateColumns(val: any) {\n    if (val) {\n      const arr = val.toArray();\n      if (arr.length) {\n        this._internalColumns = translateTemplates(arr);\n        setColumnDefaults(this._internalColumns);\n        this.recalculateColumns();\n        this.sortInternalRows();\n        this.cd.markForCheck();\n      }\n    }\n  }\n\n  /**\n   * Creates a map with the data grouped by the user choice of grouping index\n   *\n   * @param originalArray the original array passed via parameter\n   * @param groupByIndex  the index of the column to group the data by\n   */\n  groupArrayBy(originalArray: any, groupBy: any) {\n    // create a map to hold groups with their corresponding results\n    const map = new Map();\n    let i: number = 0;\n\n    originalArray.forEach((item: any) => {\n      const key = item[groupBy];\n      if (!map.has(key)) {\n        map.set(key, [item]);\n      } else {\n        map.get(key).push(item);\n      }\n      i++;\n    });\n\n    const addGroup = (key: any, value: any) => {\n      return { key, value };\n    };\n\n    // convert map back to a simple array of objects\n    return Array.from(map, x => addGroup(x[0], x[1]));\n  }\n\n  /*\n   * Lifecycle hook that is called when Angular dirty checks a directive.\n   */\n  ngDoCheck(): void {\n    if (this.rowDiffer.diff(this.rows)) {\n      if (!this.externalSorting) {\n        this.sortInternalRows();\n      } else {\n        this._internalRows = [...this.rows];\n      }\n\n      // auto group by parent on new update\n      this._internalRows = groupRowsByParents(\n        this._internalRows,\n        optionalGetterForProp(this.treeFromRelation),\n        optionalGetterForProp(this.treeToRelation)\n      );\n\n      this.recalculatePages();\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * Recalc's the sizes of the grid.\n   *\n   * Updated automatically on changes to:\n   *\n   *  - Columns\n   *  - Rows\n   *  - Paging related\n   *\n   * Also can be manually invoked or upon window resize.\n   */\n  recalculate(): void {\n    this.recalculateDims();\n    this.recalculateColumns();\n    this.cd.markForCheck();\n  }\n\n  /**\n   * Window resize handler to update sizes.\n   */\n  @HostListener('window:resize')\n  @throttleable(5)\n  onWindowResize(): void {\n    this.recalculate();\n  }\n\n  /**\n   * Recalulcates the column widths based on column width\n   * distribution mode and scrollbar offsets.\n   */\n  recalculateColumns(\n    columns: any[] = this._internalColumns,\n    forceIdx: number = -1,\n    allowBleed: boolean = this.scrollbarH\n  ): any[] | undefined {\n    if (!columns) return undefined;\n\n    let width = this._innerWidth;\n    if (this.scrollbarV) {\n      width = width - this.scrollbarHelper.width;\n    }\n\n    if (this.columnMode === ColumnMode.force) {\n      forceFillColumnWidths(columns, width, forceIdx, allowBleed);\n    } else if (this.columnMode === ColumnMode.flex) {\n      adjustColumnWidths(columns, width);\n    }\n\n    return columns;\n  }\n\n  /**\n   * Recalculates the dimensions of the table size.\n   * Internally calls the page size and row count calcs too.\n   *\n   */\n  recalculateDims(): void {\n    const dims = this.dimensionsHelper.getDimensions(this.element);\n    this._innerWidth = Math.floor(dims.width);\n\n    if (this.scrollbarV) {\n      let height = dims.height;\n      if (this.headerHeight) height = height - this.headerHeight;\n      if (this.footerHeight) height = height - this.footerHeight;\n      this.bodyHeight = height;\n    }\n\n    this.recalculatePages();\n  }\n\n  /**\n   * Recalculates the pages after a update.\n   */\n  recalculatePages(): void {\n    this.pageSize = this.calcPageSize();\n    this.rowCount = this.calcRowCount();\n  }\n\n  /**\n   * Body triggered a page event.\n   */\n  onBodyPage({ offset }: any): void {\n    // Avoid pagination caming from body events like scroll when the table\n    // has no virtualization and the external paging is enable.\n    // This means, let's the developer handle pagination by my him(her) self\n    if (this.externalPaging && !this.virtualization) {\n      return;\n    }\n\n    this.offset = offset;\n\n    this.page.emit({\n      count: this.count,\n      pageSize: this.pageSize,\n      limit: this.limit,\n      offset: this.offset\n    });\n  }\n\n  /**\n   * The body triggered a scroll event.\n   */\n  onBodyScroll(event: MouseEvent): void {\n    this._offsetX.next(event.offsetX);\n    this.scroll.emit(event);\n    this.cd.detectChanges();\n  }\n\n  /**\n   * The footer triggered a page event.\n   */\n  onFooterPage(event: any) {\n    this.offset = event.page - 1;\n    this.bodyComponent.updateOffsetY(this.offset);\n\n    this.page.emit({\n      count: this.count,\n      pageSize: this.pageSize,\n      limit: this.limit,\n      offset: this.offset\n    });\n\n    if (this.selectAllRowsOnPage) {\n      this.selected = [];\n      this.select.emit({\n        selected: this.selected\n      });\n    }\n  }\n\n  /**\n   * Recalculates the sizes of the page\n   */\n  calcPageSize(val: any[] = this.rows): number {\n    // Keep the page size constant even if the row has been expanded.\n    // This is because an expanded row is still considered to be a child of\n    // the original row.  Hence calculation would use rowHeight only.\n    if (this.scrollbarV && this.virtualization) {\n      const size = Math.ceil(this.bodyHeight / (this.rowHeight as number));\n      return Math.max(size, 0);\n    }\n\n    // if limit is passed, we are paging\n    if (this.limit !== undefined) {\n      return this.limit;\n    }\n\n    // otherwise use row length\n    if (val) {\n      return val.length;\n    }\n\n    // other empty :(\n    return 0;\n  }\n\n  /**\n   * Calculates the row count.\n   */\n  calcRowCount(val: any[] = this.rows): number {\n    if (!this.externalPaging) {\n      if (!val) return 0;\n\n      if (this.groupedRows) {\n        return this.groupedRows.length;\n      } else if (this.treeFromRelation != null && this.treeToRelation != null) {\n        return this._internalRows.length;\n      } else {\n        return val.length;\n      }\n    }\n\n    return this.count;\n  }\n\n  /**\n   * The header triggered a contextmenu event.\n   */\n  onColumnContextmenu({ event, column }: any): void {\n    this.tableContextmenu.emit({ event, type: ContextmenuType.header, content: column });\n  }\n\n  /**\n   * The body triggered a contextmenu event.\n   */\n  onRowContextmenu({ event, row }: any): void {\n    this.tableContextmenu.emit({ event, type: ContextmenuType.body, content: row });\n  }\n\n  /**\n   * The header triggered a column resize event.\n   */\n  onColumnResize({ column, newValue }: any): void {\n    /* Safari/iOS 10.2 workaround */\n    if (column === undefined) {\n      return;\n    }\n\n    let idx: number;\n    const cols = this._internalColumns.map((c, i) => {\n      c = { ...c };\n\n      if (c.$$id === column.$$id) {\n        idx = i;\n        c.width = newValue;\n\n        // set this so we can force the column\n        // width distribution to be to this value\n        c.$$oldWidth = newValue;\n      }\n\n      return c;\n    });\n\n    this.recalculateColumns(cols, idx);\n    this._internalColumns = cols;\n\n    this.resize.emit({\n      column,\n      newValue\n    });\n  }\n\n  /**\n   * The header triggered a column re-order event.\n   */\n  onColumnReorder({ column, newValue, prevValue }: any): void {\n    const cols = this._internalColumns.map(c => {\n      return { ...c };\n    });\n\n    if (this.swapColumns) {\n      const prevCol = cols[newValue];\n      cols[newValue] = column;\n      cols[prevValue] = prevCol;\n    } else {\n      if (newValue > prevValue) {\n        const movedCol = cols[prevValue];\n        for (let i = prevValue; i < newValue; i++) {\n          cols[i] = cols[i + 1];\n        }\n        cols[newValue] = movedCol;\n      } else {\n        const movedCol = cols[prevValue];\n        for (let i = prevValue; i > newValue; i--) {\n          cols[i] = cols[i - 1];\n        }\n        cols[newValue] = movedCol;\n      }\n    }\n\n    this._internalColumns = cols;\n\n    this.reorder.emit({\n      column,\n      newValue,\n      prevValue\n    });\n  }\n\n  /**\n   * The header triggered a column sort event.\n   */\n  onColumnSort(event: any): void {\n    // clean selected rows\n    if (this.selectAllRowsOnPage) {\n      this.selected = [];\n      this.select.emit({\n        selected: this.selected\n      });\n    }\n\n    this.sorts = event.sorts;\n\n    // this could be optimized better since it will resort\n    // the rows again on the 'push' detection...\n    if (this.externalSorting === false) {\n      // don't use normal setter so we don't resort\n      this.sortInternalRows();\n    }\n\n    // auto group by parent on new update\n    this._internalRows = groupRowsByParents(\n      this._internalRows,\n      optionalGetterForProp(this.treeFromRelation),\n      optionalGetterForProp(this.treeToRelation)\n    );\n\n    // Always go to first page when sorting to see the newly sorted data\n    this.offset = 0;\n    this.bodyComponent.updateOffsetY(this.offset);\n    this.sort.emit(event);\n  }\n\n  /**\n   * Toggle all row selection\n   */\n  onHeaderSelect(event: any): void {\n    if (this.bodyComponent && this.selectAllRowsOnPage) {\n      // before we splice, chk if we currently have all selected\n      const first = this.bodyComponent.indexes.first;\n      const last = this.bodyComponent.indexes.last;\n      const allSelected = this.selected.length === last - first;\n\n      // remove all existing either way\n      this.selected = [];\n\n      // do the opposite here\n      if (!allSelected) {\n        this.selected.push(...this._internalRows.slice(first, last));\n      }\n    } else {\n      // before we splice, chk if we currently have all selected\n      const allSelected = this.selected.length === this.rows.length;\n      // remove all existing either way\n      this.selected = [];\n      // do the opposite here\n      if (!allSelected) {\n        this.selected.push(...this.rows);\n      }\n    }\n\n    this.select.emit({\n      selected: this.selected\n    });\n  }\n\n  /**\n   * A row was selected from body\n   */\n  onBodySelect(event: any): void {\n    this.select.emit(event);\n  }\n\n  /**\n   * A row was expanded or collapsed for tree\n   */\n  onTreeAction(event: any) {\n    const row = event.row;\n    // TODO: For duplicated items this will not work\n    const rowIndex = this._rows.findIndex(r => r[this.treeToRelation] === event.row[this.treeToRelation]);\n    this.treeAction.emit({ row, rowIndex });\n  }\n\n  ngOnDestroy() {\n    this._subscriptions.forEach(subscription => subscription.unsubscribe());\n  }\n\n  /**\n   * listen for changes to input bindings of all DataTableColumnDirective and\n   * trigger the columnTemplates.changes observable to emit\n   */\n  private listenForColumnInputChanges(): void {\n    this._subscriptions.push(\n      this.columnChangesService.columnInputChanges$.subscribe(() => {\n        if (this.columnTemplates) {\n          this.columnTemplates.notifyOnChanges();\n        }\n      })\n    );\n  }\n\n  private sortInternalRows(): void {\n    this._internalRows = sortRows(this._internalRows, this._internalColumns, this.sorts);\n  }\n}\n","import {\n  Component,\n  Input,\n  EventEmitter,\n  Output,\n  HostBinding,\n  HostListener,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { SortType } from '../../types/sort.type';\nimport { SelectionType } from '../../types/selection.type';\nimport { TableColumn } from '../../types/table-column.type';\nimport { nextSortDir } from '../../utils/sort';\nimport { SortDirection } from '../../types/sort-direction.type';\n\n@Component({\n  selector: 'datatable-header-cell',\n  template: `\n    <div class=\"datatable-header-cell-template-wrap\">\n      <ng-template\n        *ngIf=\"isTarget\"\n        [ngTemplateOutlet]=\"targetMarkerTemplate\"\n        [ngTemplateOutletContext]=\"targetMarkerContext\"\n      >\n      </ng-template>\n      <label *ngIf=\"isCheckboxable\" class=\"datatable-checkbox\">\n        <input type=\"checkbox\" [checked]=\"allRowsSelected\" (change)=\"select.emit(!allRowsSelected)\" />\n      </label>\n      <span *ngIf=\"!column.headerTemplate\" class=\"datatable-header-cell-wrapper\">\n        <span class=\"datatable-header-cell-label draggable\" (click)=\"onSort()\" [innerHTML]=\"name\"> </span>\n      </span>\n      <ng-template\n        *ngIf=\"column.headerTemplate\"\n        [ngTemplateOutlet]=\"column.headerTemplate\"\n        [ngTemplateOutletContext]=\"cellContext\"\n      >\n      </ng-template>\n      <span (click)=\"onSort()\" [class]=\"sortClass\"> </span>\n    </div>\n  `,\n  host: {\n    class: 'datatable-header-cell'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableHeaderCellComponent {\n  @Input() sortType: SortType;\n  @Input() sortAscendingIcon: string;\n  @Input() sortDescendingIcon: string;\n  @Input() sortUnsetIcon: string;\n\n  @Input() isTarget: boolean;\n  @Input() targetMarkerTemplate: any;\n  @Input() targetMarkerContext: any;\n\n  _allRowsSelected: boolean;\n\n  @Input() set allRowsSelected(value) {\n    this._allRowsSelected = value;\n    this.cellContext.allRowsSelected = value;\n  }\n  get allRowsSelected() {\n    return this._allRowsSelected;\n  }\n\n  @Input() selectionType: SelectionType;\n\n  @Input() set column(column: TableColumn) {\n    this._column = column;\n    this.cellContext.column = column;\n    this.cd.markForCheck();\n  }\n\n  get column(): TableColumn {\n    return this._column;\n  }\n\n  @HostBinding('style.height.px')\n  @Input()\n  headerHeight: number;\n\n  @Input() set sorts(val: any[]) {\n    this._sorts = val;\n    this.sortDir = this.calcSortDir(val);\n    this.cellContext.sortDir = this.sortDir;\n    this.sortClass = this.calcSortClass(this.sortDir);\n    this.cd.markForCheck();\n  }\n\n  get sorts(): any[] {\n    return this._sorts;\n  }\n\n  @Output() sort: EventEmitter<any> = new EventEmitter();\n  @Output() select: EventEmitter<any> = new EventEmitter();\n  @Output() columnContextmenu = new EventEmitter<{ event: MouseEvent; column: any }>(false);\n\n  @HostBinding('class')\n  get columnCssClasses(): any {\n    let cls = 'datatable-header-cell';\n\n    if (this.column.sortable) cls += ' sortable';\n    if (this.column.resizeable) cls += ' resizeable';\n    if (this.column.headerClass) {\n      if (typeof this.column.headerClass === 'string') {\n        cls += ' ' + this.column.headerClass;\n      } else if (typeof this.column.headerClass === 'function') {\n        const res = this.column.headerClass({\n          column: this.column\n        });\n\n        if (typeof res === 'string') {\n          cls += res;\n        } else if (typeof res === 'object') {\n          const keys = Object.keys(res);\n          for (const k of keys) {\n            if (res[k] === true) cls += ` ${k}`;\n          }\n        }\n      }\n    }\n\n    const sortDir = this.sortDir;\n    if (sortDir) {\n      cls += ` sort-active sort-${sortDir}`;\n    }\n\n    return cls;\n  }\n\n  @HostBinding('attr.title')\n  get name(): string {\n    // guaranteed to have a value by setColumnDefaults() in column-helper.ts\n    return this.column.headerTemplate === undefined ? this.column.name : undefined;\n  }\n\n  @HostBinding('style.minWidth.px')\n  get minWidth(): number {\n    return this.column.minWidth;\n  }\n\n  @HostBinding('style.maxWidth.px')\n  get maxWidth(): number {\n    return this.column.maxWidth;\n  }\n\n  @HostBinding('style.width.px')\n  get width(): number {\n    return this.column.width;\n  }\n\n  get isCheckboxable(): boolean {\n    return this.column.checkboxable && this.column.headerCheckboxable && this.selectionType === SelectionType.checkbox;\n  }\n\n  sortFn = this.onSort.bind(this);\n  sortClass: string;\n  sortDir: SortDirection;\n  selectFn = this.select.emit.bind(this.select);\n\n  cellContext: any;\n\n  private _column: TableColumn;\n  private _sorts: any[];\n\n  constructor(private cd: ChangeDetectorRef) {\n    this.cellContext = {\n      column: this.column,\n      sortDir: this.sortDir,\n      sortFn: this.sortFn,\n      allRowsSelected: this.allRowsSelected,\n      selectFn: this.selectFn\n    };\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextmenu($event: MouseEvent): void {\n    this.columnContextmenu.emit({ event: $event, column: this.column });\n  }\n\n  ngOnInit() {\n    this.sortClass = this.calcSortClass(this.sortDir);\n  }\n\n  calcSortDir(sorts: any[]): any {\n    if (sorts && this.column) {\n      const sort = sorts.find((s: any) => {\n        return s.prop === this.column.prop;\n      });\n\n      if (sort) return sort.dir;\n    }\n  }\n\n  onSort(): void {\n    if (!this.column.sortable) return;\n\n    const newValue = nextSortDir(this.sortType, this.sortDir);\n    this.sort.emit({\n      column: this.column,\n      prevValue: this.sortDir,\n      newValue\n    });\n  }\n\n  calcSortClass(sortDir: SortDirection): string {\n    if (!this.cellContext.column.sortable) return;\n    if (sortDir === SortDirection.asc) {\n      return `sort-btn sort-asc ${this.sortAscendingIcon}`;\n    } else if (sortDir === SortDirection.desc) {\n      return `sort-btn sort-desc ${this.sortDescendingIcon}`;\n    } else {\n      return `sort-btn ${this.sortUnsetIcon}`;\n    }\n  }\n}\n","import { Component, Output, EventEmitter, ChangeDetectionStrategy, Input } from '@angular/core';\nimport { DatatableFooterDirective } from './footer.directive';\n@Component({\n  selector: 'datatable-footer',\n  template: `\n    <div\n      class=\"datatable-footer-inner\"\n      [ngClass]=\"{ 'selected-count': selectedMessage }\"\n      [style.height.px]=\"footerHeight\"\n    >\n      <ng-template\n        *ngIf=\"footerTemplate\"\n        [ngTemplateOutlet]=\"footerTemplate.template\"\n        [ngTemplateOutletContext]=\"{\n          rowCount: rowCount,\n          pageSize: pageSize,\n          selectedCount: selectedCount,\n          curPage: curPage,\n          offset: offset\n        }\"\n      >\n      </ng-template>\n      <div class=\"page-count\" *ngIf=\"!footerTemplate\">\n        <span *ngIf=\"selectedMessage\"> {{ selectedCount?.toLocaleString() }} {{ selectedMessage }} / </span>\n        {{ rowCount?.toLocaleString() }} {{ totalMessage }}\n      </div>\n      <datatable-pager\n        *ngIf=\"!footerTemplate\"\n        [pagerLeftArrowIcon]=\"pagerLeftArrowIcon\"\n        [pagerRightArrowIcon]=\"pagerRightArrowIcon\"\n        [pagerPreviousIcon]=\"pagerPreviousIcon\"\n        [pagerNextIcon]=\"pagerNextIcon\"\n        [page]=\"curPage\"\n        [size]=\"pageSize\"\n        [count]=\"rowCount\"\n        [hidden]=\"!isVisible\"\n        (change)=\"page.emit($event)\"\n      >\n      </datatable-pager>\n    </div>\n  `,\n  host: {\n    class: 'datatable-footer'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableFooterComponent {\n  @Input() footerHeight: number;\n  @Input() rowCount: number;\n  @Input() pageSize: number;\n  @Input() offset: number;\n  @Input() pagerLeftArrowIcon: string;\n  @Input() pagerRightArrowIcon: string;\n  @Input() pagerPreviousIcon: string;\n  @Input() pagerNextIcon: string;\n  @Input() totalMessage: string;\n  @Input() footerTemplate: DatatableFooterDirective;\n\n  @Input() selectedCount: number = 0;\n  @Input() selectedMessage: string | boolean;\n\n  @Output() page: EventEmitter<any> = new EventEmitter();\n\n  get isVisible(): boolean {\n    return this.rowCount / this.pageSize > 1;\n  }\n\n  get curPage(): number {\n    return this.offset + 1;\n  }\n}\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'datatable-pager',\n  template: `\n    <ul class=\"pager\">\n      <li [class.disabled]=\"!canPrevious()\">\n        <a role=\"button\" aria-label=\"go to first page\" href=\"javascript:void(0)\" (click)=\"selectPage(1)\">\n          <i class=\"{{ pagerPreviousIcon }}\"></i>\n        </a>\n      </li>\n      <li [class.disabled]=\"!canPrevious()\">\n        <a role=\"button\" aria-label=\"go to previous page\" href=\"javascript:void(0)\" (click)=\"prevPage()\">\n          <i class=\"{{ pagerLeftArrowIcon }}\"></i>\n        </a>\n      </li>\n      <li\n        role=\"button\"\n        [attr.aria-label]=\"'page ' + pg.number\"\n        class=\"pages\"\n        *ngFor=\"let pg of pages\"\n        [class.active]=\"pg.number === page\"\n      >\n        <a href=\"javascript:void(0)\" (click)=\"selectPage(pg.number)\">\n          {{ pg.text }}\n        </a>\n      </li>\n      <li [class.disabled]=\"!canNext()\">\n        <a role=\"button\" aria-label=\"go to next page\" href=\"javascript:void(0)\" (click)=\"nextPage()\">\n          <i class=\"{{ pagerRightArrowIcon }}\"></i>\n        </a>\n      </li>\n      <li [class.disabled]=\"!canNext()\">\n        <a role=\"button\" aria-label=\"go to last page\" href=\"javascript:void(0)\" (click)=\"selectPage(totalPages)\">\n          <i class=\"{{ pagerNextIcon }}\"></i>\n        </a>\n      </li>\n    </ul>\n  `,\n  host: {\n    class: 'datatable-pager'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTablePagerComponent {\n  @Input() pagerLeftArrowIcon: string;\n  @Input() pagerRightArrowIcon: string;\n  @Input() pagerPreviousIcon: string;\n  @Input() pagerNextIcon: string;\n\n  @Input()\n  set size(val: number) {\n    this._size = val;\n    this.pages = this.calcPages();\n  }\n\n  get size(): number {\n    return this._size;\n  }\n\n  @Input()\n  set count(val: number) {\n    this._count = val;\n    this.pages = this.calcPages();\n  }\n\n  get count(): number {\n    return this._count;\n  }\n\n  @Input()\n  set page(val: number) {\n    this._page = val;\n    this.pages = this.calcPages();\n  }\n\n  get page(): number {\n    return this._page;\n  }\n\n  get totalPages(): number {\n    const count = this.size < 1 ? 1 : Math.ceil(this.count / this.size);\n    return Math.max(count || 0, 1);\n  }\n\n  @Output() change: EventEmitter<any> = new EventEmitter();\n\n  _count: number = 0;\n  _page: number = 1;\n  _size: number = 0;\n  pages: any;\n\n  canPrevious(): boolean {\n    return this.page > 1;\n  }\n\n  canNext(): boolean {\n    return this.page < this.totalPages;\n  }\n\n  prevPage(): void {\n    this.selectPage(this.page - 1);\n  }\n\n  nextPage(): void {\n    this.selectPage(this.page + 1);\n  }\n\n  selectPage(page: number): void {\n    if (page > 0 && page <= this.totalPages && page !== this.page) {\n      this.page = page;\n\n      this.change.emit({\n        page\n      });\n    }\n  }\n\n  calcPages(page?: number): any[] {\n    const pages = [];\n    let startPage = 1;\n    let endPage = this.totalPages;\n    const maxSize = 5;\n    const isMaxSized = maxSize < this.totalPages;\n\n    page = page || this.page;\n\n    if (isMaxSized) {\n      startPage = page - Math.floor(maxSize / 2);\n      endPage = page + Math.floor(maxSize / 2);\n\n      if (startPage < 1) {\n        startPage = 1;\n        endPage = Math.min(startPage + maxSize - 1, this.totalPages);\n      } else if (endPage > this.totalPages) {\n        startPage = Math.max(this.totalPages - maxSize + 1, 1);\n        endPage = this.totalPages;\n      }\n    }\n\n    for (let num = startPage; num <= endPage; num++) {\n      pages.push({\n        number: num,\n        text: <string>(<any>num)\n      });\n    }\n\n    return pages;\n  }\n}\n","export enum Keys {\n  up = 38,\n  down = 40,\n  return = 13,\n  escape = 27,\n  left = 37,\n  right = 39\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'datatable-progress',\n  template: `\n    <div class=\"progress-linear\" role=\"progressbar\">\n      <div class=\"container\">\n        <div class=\"bar\"></div>\n      </div>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ProgressBarComponent {}\n","import {\n  Component,\n  Input,\n  HostBinding,\n  ElementRef,\n  Output,\n  KeyValueDiffers,\n  KeyValueDiffer,\n  EventEmitter,\n  HostListener,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  DoCheck,\n  SkipSelf\n} from '@angular/core';\n\nimport { TreeStatus } from './body-cell.component';\nimport { columnsByPin, columnGroupWidths, columnsByPinArr } from '../../utils/column';\nimport { Keys } from '../../utils/keys';\nimport { ScrollbarHelper } from '../../services/scrollbar-helper.service';\nimport { translateXY } from '../../utils/translate';\n\n@Component({\n  selector: 'datatable-body-row',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div\n      *ngFor=\"let colGroup of _columnsByPin; let i = index; trackBy: trackByGroups\"\n      class=\"datatable-row-{{ colGroup.type }} datatable-row-group\"\n      [ngStyle]=\"_groupStyles[colGroup.type]\"\n    >\n      <datatable-body-cell\n        *ngFor=\"let column of colGroup.columns; let ii = index; trackBy: columnTrackingFn\"\n        tabindex=\"-1\"\n        [row]=\"row\"\n        [group]=\"group\"\n        [expanded]=\"expanded\"\n        [isSelected]=\"isSelected\"\n        [rowIndex]=\"rowIndex\"\n        [column]=\"column\"\n        [rowHeight]=\"rowHeight\"\n        [displayCheck]=\"displayCheck\"\n        [treeStatus]=\"treeStatus\"\n        (activate)=\"onActivate($event, ii)\"\n        (treeAction)=\"onTreeAction()\"\n      >\n      </datatable-body-cell>\n    </div>\n  `\n})\nexport class DataTableBodyRowComponent implements DoCheck {\n  @Input() set columns(val: any[]) {\n    this._columns = val;\n    this.recalculateColumns(val);\n    this.buildStylesByGroup();\n  }\n\n  get columns(): any[] {\n    return this._columns;\n  }\n\n  @Input() set innerWidth(val: number) {\n    if (this._columns) {\n      const colByPin = columnsByPin(this._columns);\n      this._columnGroupWidths = columnGroupWidths(colByPin, this._columns);\n    }\n\n    this._innerWidth = val;\n    this.recalculateColumns();\n    this.buildStylesByGroup();\n  }\n\n  get innerWidth(): number {\n    return this._innerWidth;\n  }\n\n  @Input() expanded: boolean;\n  @Input() rowClass: any;\n  @Input() row: any;\n  @Input() group: any;\n  @Input() isSelected: boolean;\n  @Input() rowIndex: number;\n  @Input() displayCheck: any;\n  @Input() treeStatus: TreeStatus = 'collapsed';\n\n  @Input()\n  set offsetX(val: number) {\n    this._offsetX = val;\n    this.buildStylesByGroup();\n  }\n  get offsetX() {\n    return this._offsetX;\n  }\n\n  @HostBinding('class')\n  get cssClass() {\n    let cls = 'datatable-body-row';\n    if (this.isSelected) {\n      cls += ' active';\n    }\n    if (this.rowIndex % 2 !== 0) {\n      cls += ' datatable-row-odd';\n    }\n    if (this.rowIndex % 2 === 0) {\n      cls += ' datatable-row-even';\n    }\n\n    if (this.rowClass) {\n      const res = this.rowClass(this.row);\n      if (typeof res === 'string') {\n        cls += ` ${res}`;\n      } else if (typeof res === 'object') {\n        const keys = Object.keys(res);\n        for (const k of keys) {\n          if (res[k] === true) {\n            cls += ` ${k}`;\n          }\n        }\n      }\n    }\n\n    return cls;\n  }\n\n  @HostBinding('style.height.px')\n  @Input()\n  rowHeight: number;\n\n  @HostBinding('style.width.px')\n  get columnsTotalWidths(): string {\n    return this._columnGroupWidths.total;\n  }\n\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\n\n  _element: any;\n  _columnGroupWidths: any;\n  _columnsByPin: any;\n  _offsetX: number;\n  _columns: any[];\n  _innerWidth: number;\n  _groupStyles: { [prop: string]: {} } = {\n    left: {},\n    center: {},\n    right: {}\n  };\n\n  private _rowDiffer: KeyValueDiffer<{}, {}>;\n\n  constructor(\n    private differs: KeyValueDiffers,\n    @SkipSelf() private scrollbarHelper: ScrollbarHelper,\n    private cd: ChangeDetectorRef,\n    element: ElementRef\n  ) {\n    this._element = element.nativeElement;\n    this._rowDiffer = differs.find({}).create();\n  }\n\n  ngDoCheck(): void {\n    if (this._rowDiffer.diff(this.row)) {\n      this.cd.markForCheck();\n    }\n  }\n\n  trackByGroups(index: number, colGroup: any): any {\n    return colGroup.type;\n  }\n\n  columnTrackingFn(index: number, column: any): any {\n    return column.$$id;\n  }\n\n  buildStylesByGroup() {\n    this._groupStyles.left = this.calcStylesByGroup('left');\n    this._groupStyles.center = this.calcStylesByGroup('center');\n    this._groupStyles.right = this.calcStylesByGroup('right');\n    this.cd.markForCheck();\n  }\n\n  calcStylesByGroup(group: string) {\n    const widths = this._columnGroupWidths;\n    const offsetX = this.offsetX;\n\n    const styles = {\n      width: `${widths[group]}px`\n    };\n\n    if (group === 'left') {\n      translateXY(styles, offsetX, 0);\n    } else if (group === 'right') {\n      const bodyWidth = parseInt(this.innerWidth + '', 0);\n      const totalDiff = widths.total - bodyWidth;\n      const offsetDiff = totalDiff - offsetX;\n      const offset = (offsetDiff + this.scrollbarHelper.width) * -1;\n      translateXY(styles, offset, 0);\n    }\n\n    return styles;\n  }\n\n  onActivate(event: any, index: number): void {\n    event.cellIndex = index;\n    event.rowElement = this._element;\n    this.activate.emit(event);\n  }\n\n  @HostListener('keydown', ['$event'])\n  onKeyDown(event: KeyboardEvent): void {\n    const keyCode = event.keyCode;\n    const isTargetRow = event.target === this._element;\n\n    const isAction =\n      keyCode === Keys.return ||\n      keyCode === Keys.down ||\n      keyCode === Keys.up ||\n      keyCode === Keys.left ||\n      keyCode === Keys.right;\n\n    if (isAction && isTargetRow) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.activate.emit({\n        type: 'keydown',\n        event,\n        row: this.row,\n        rowElement: this._element\n      });\n    }\n  }\n\n  @HostListener('mouseenter', ['$event'])\n  onMouseenter(event: any): void {\n    this.activate.emit({\n      type: 'mouseenter',\n      event,\n      row: this.row,\n      rowElement: this._element\n    });\n  }\n\n  recalculateColumns(val: any[] = this.columns): void {\n    this._columns = val;\n    const colsByPin = columnsByPin(this._columns);\n    this._columnsByPin = columnsByPinArr(this._columns);\n    this._columnGroupWidths = columnGroupWidths(colsByPin, this._columns);\n  }\n\n  onTreeAction() {\n    this.treeAction.emit();\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostListener,\n  DoCheck,\n  ChangeDetectionStrategy,\n  KeyValueDiffer,\n  ChangeDetectorRef,\n  KeyValueDiffers\n} from '@angular/core';\n\n@Component({\n  selector: 'datatable-row-wrapper',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div *ngIf=\"groupHeader && groupHeader.template\" class=\"datatable-group-header\" [ngStyle]=\"getGroupHeaderStyle()\">\n      <ng-template\n        *ngIf=\"groupHeader && groupHeader.template\"\n        [ngTemplateOutlet]=\"groupHeader.template\"\n        [ngTemplateOutletContext]=\"groupContext\"\n      >\n      </ng-template>\n    </div>\n    <ng-content *ngIf=\"(groupHeader && groupHeader.template && expanded) || !groupHeader || !groupHeader.template\">\n    </ng-content>\n    <div\n      *ngIf=\"rowDetail && rowDetail.template && expanded\"\n      [style.height.px]=\"detailRowHeight\"\n      class=\"datatable-row-detail\"\n    >\n      <ng-template\n        *ngIf=\"rowDetail && rowDetail.template\"\n        [ngTemplateOutlet]=\"rowDetail.template\"\n        [ngTemplateOutletContext]=\"rowContext\"\n      >\n      </ng-template>\n    </div>\n  `,\n  host: {\n    class: 'datatable-row-wrapper'\n  }\n})\nexport class DataTableRowWrapperComponent implements DoCheck {\n  @Input() innerWidth: number;\n  @Input() rowDetail: any;\n  @Input() groupHeader: any;\n  @Input() offsetX: number;\n  @Input() detailRowHeight: any;\n  @Input() row: any;\n  @Input() groupedRows: any;\n  @Output() rowContextmenu = new EventEmitter<{ event: MouseEvent; row: any }>(false);\n\n  @Input() set rowIndex(val: number) {\n    this._rowIndex = val;\n    this.rowContext.rowIndex = val;\n    this.groupContext.rowIndex = val;\n    this.cd.markForCheck();\n  }\n\n  get rowIndex(): number {\n    return this._rowIndex;\n  }\n\n  @Input() set expanded(val: boolean) {\n    this._expanded = val;\n    this.groupContext.expanded = val;\n    this.rowContext.expanded = val;\n    this.cd.markForCheck();\n  }\n\n  get expanded(): boolean {\n    return this._expanded;\n  }\n\n  groupContext: any;\n  rowContext: any;\n\n  private rowDiffer: KeyValueDiffer<{}, {}>;\n  private _expanded: boolean = false;\n  private _rowIndex: number;\n\n  constructor(private cd: ChangeDetectorRef, private differs: KeyValueDiffers) {\n    this.groupContext = {\n      group: this.row,\n      expanded: this.expanded,\n      rowIndex: this.rowIndex\n    };\n\n    this.rowContext = {\n      row: this.row,\n      expanded: this.expanded,\n      rowIndex: this.rowIndex\n    };\n\n    this.rowDiffer = differs.find({}).create();\n  }\n\n  ngDoCheck(): void {\n    if (this.rowDiffer.diff(this.row)) {\n      this.rowContext.row = this.row;\n      this.groupContext.group = this.row;\n      this.cd.markForCheck();\n    }\n  }\n\n  @HostListener('contextmenu', ['$event'])\n  onContextmenu($event: MouseEvent): void {\n    this.rowContextmenu.emit({ event: $event, row: this.row });\n  }\n\n  getGroupHeaderStyle(): any {\n    const styles = {};\n\n    styles['transform'] = 'translate3d(' + this.offsetX + 'px, 0px, 0px)';\n    styles['backface-visibility'] = 'hidden';\n    styles['width'] = this.innerWidth;\n\n    return styles;\n  }\n}\n","import {\n  Component,\n  Input,\n  PipeTransform,\n  HostBinding,\n  ViewChild,\n  ChangeDetectorRef,\n  Output,\n  EventEmitter,\n  HostListener,\n  ElementRef,\n  ViewContainerRef,\n  OnDestroy,\n  DoCheck,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { TableColumn } from '../../types/table-column.type';\nimport { SortDirection } from '../../types/sort-direction.type';\nimport { Keys } from '../../utils/keys';\n\nexport type TreeStatus = 'collapsed' | 'expanded' | 'loading' | 'disabled';\n\n@Component({\n  selector: 'datatable-body-cell',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"datatable-body-cell-label\" [style.margin-left.px]=\"calcLeftMargin(column, row)\">\n      <label\n        *ngIf=\"column.checkboxable && (!displayCheck || displayCheck(row, column, value))\"\n        class=\"datatable-checkbox\"\n      >\n        <input type=\"checkbox\" [checked]=\"isSelected\" (click)=\"onCheckboxChange($event)\" />\n      </label>\n      <ng-container *ngIf=\"column.isTreeColumn\">\n        <button\n          *ngIf=\"!column.treeToggleTemplate\"\n          class=\"datatable-tree-button\"\n          [disabled]=\"treeStatus === 'disabled'\"\n          (click)=\"onTreeAction()\"\n        >\n          <span>\n            <i *ngIf=\"treeStatus === 'loading'\" class=\"icon datatable-icon-collapse\"></i>\n            <i *ngIf=\"treeStatus === 'collapsed'\" class=\"icon datatable-icon-up\"></i>\n            <i *ngIf=\"treeStatus === 'expanded' || treeStatus === 'disabled'\" class=\"icon datatable-icon-down\"></i>\n          </span>\n        </button>\n        <ng-template\n          *ngIf=\"column.treeToggleTemplate\"\n          [ngTemplateOutlet]=\"column.treeToggleTemplate\"\n          [ngTemplateOutletContext]=\"{ cellContext: cellContext }\"\n        >\n        </ng-template>\n      </ng-container>\n\n      <span *ngIf=\"!column.cellTemplate\" [title]=\"sanitizedValue\" [innerHTML]=\"value\"> </span>\n      <ng-template\n        #cellTemplate\n        *ngIf=\"column.cellTemplate\"\n        [ngTemplateOutlet]=\"column.cellTemplate\"\n        [ngTemplateOutletContext]=\"cellContext\"\n      >\n      </ng-template>\n    </div>\n  `\n})\nexport class DataTableBodyCellComponent implements DoCheck, OnDestroy {\n  @Input() displayCheck: (row: any, column?: TableColumn, value?: any) => boolean;\n\n  @Input() set group(group: any) {\n    this._group = group;\n    this.cellContext.group = group;\n    this.checkValueUpdates();\n    this.cd.markForCheck();\n  }\n\n  get group() {\n    return this._group;\n  }\n\n  @Input() set rowHeight(val: number) {\n    this._rowHeight = val;\n    this.cellContext.rowHeight = val;\n    this.checkValueUpdates();\n    this.cd.markForCheck();\n  }\n\n  get rowHeight() {\n    return this._rowHeight;\n  }\n\n  @Input() set isSelected(val: boolean) {\n    this._isSelected = val;\n    this.cellContext.isSelected = val;\n    this.cd.markForCheck();\n  }\n\n  get isSelected(): boolean {\n    return this._isSelected;\n  }\n\n  @Input() set expanded(val: boolean) {\n    this._expanded = val;\n    this.cellContext.expanded = val;\n    this.cd.markForCheck();\n  }\n\n  get expanded(): boolean {\n    return this._expanded;\n  }\n\n  @Input() set rowIndex(val: number) {\n    this._rowIndex = val;\n    this.cellContext.rowIndex = val;\n    this.checkValueUpdates();\n    this.cd.markForCheck();\n  }\n\n  get rowIndex(): number {\n    return this._rowIndex;\n  }\n\n  @Input() set column(column: TableColumn) {\n    this._column = column;\n    this.cellContext.column = column;\n    this.checkValueUpdates();\n    this.cd.markForCheck();\n  }\n\n  get column(): TableColumn {\n    return this._column;\n  }\n\n  @Input() set row(row: any) {\n    this._row = row;\n    this.cellContext.row = row;\n    this.checkValueUpdates();\n    this.cd.markForCheck();\n  }\n\n  get row(): any {\n    return this._row;\n  }\n\n  @Input() set sorts(val: any[]) {\n    this._sorts = val;\n    this.calcSortDir = this.calcSortDir(val);\n  }\n\n  get sorts(): any[] {\n    return this._sorts;\n  }\n\n  @Input() set treeStatus(status: TreeStatus) {\n    if (status !== 'collapsed' && status !== 'expanded' && status !== 'loading' && status !== 'disabled') {\n      this._treeStatus = 'collapsed';\n    } else {\n      this._treeStatus = status;\n    }\n    this.cellContext.treeStatus = this._treeStatus;\n    this.checkValueUpdates();\n    this.cd.markForCheck();\n  }\n\n  get treeStatus(): TreeStatus {\n    return this._treeStatus;\n  }\n\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\n\n  @ViewChild('cellTemplate', { read: ViewContainerRef, static: true })\n  cellTemplate: ViewContainerRef;\n\n  @HostBinding('class')\n  get columnCssClasses(): any {\n    let cls = 'datatable-body-cell';\n    if (this.column.cellClass) {\n      if (typeof this.column.cellClass === 'string') {\n        cls += ' ' + this.column.cellClass;\n      } else if (typeof this.column.cellClass === 'function') {\n        const res = this.column.cellClass({\n          row: this.row,\n          group: this.group,\n          column: this.column,\n          value: this.value,\n          rowHeight: this.rowHeight\n        });\n\n        if (typeof res === 'string') {\n          cls += ' ' + res;\n        } else if (typeof res === 'object') {\n          const keys = Object.keys(res);\n          for (const k of keys) {\n            if (res[k] === true) {\n              cls += ` ${k}`;\n            }\n          }\n        }\n      }\n    }\n    if (!this.sortDir) {\n      cls += ' sort-active';\n    }\n    if (this.isFocused) {\n      cls += ' active';\n    }\n    if (this.sortDir === SortDirection.asc) {\n      cls += ' sort-asc';\n    }\n    if (this.sortDir === SortDirection.desc) {\n      cls += ' sort-desc';\n    }\n\n    return cls;\n  }\n\n  @HostBinding('style.width.px')\n  get width(): number {\n    return this.column.width;\n  }\n\n  @HostBinding('style.minWidth.px')\n  get minWidth(): number {\n    return this.column.minWidth;\n  }\n\n  @HostBinding('style.maxWidth.px')\n  get maxWidth(): number {\n    return this.column.maxWidth;\n  }\n\n  @HostBinding('style.height')\n  get height(): string | number {\n    const height = this.rowHeight;\n    if (isNaN(height)) {\n      return height;\n    }\n    return height + 'px';\n  }\n\n  sanitizedValue: any;\n  value: any;\n  sortDir: SortDirection;\n  isFocused = false;\n  onCheckboxChangeFn = this.onCheckboxChange.bind(this);\n  activateFn = this.activate.emit.bind(this.activate);\n\n  cellContext: any;\n\n  private _isSelected: boolean;\n  private _sorts: any[];\n  private _column: TableColumn;\n  private _row: any;\n  private _group: any;\n  private _rowHeight: number;\n  private _rowIndex: number;\n  private _expanded: boolean;\n  private _element: any;\n  private _treeStatus: TreeStatus;\n\n  constructor(element: ElementRef, private cd: ChangeDetectorRef) {\n    this.cellContext = {\n      onCheckboxChangeFn: this.onCheckboxChangeFn,\n      activateFn: this.activateFn,\n      row: this.row,\n      group: this.group,\n      value: this.value,\n      column: this.column,\n      rowHeight: this.rowHeight,\n      isSelected: this.isSelected,\n      rowIndex: this.rowIndex,\n      treeStatus: this.treeStatus,\n      onTreeAction: this.onTreeAction.bind(this)\n    };\n\n    this._element = element.nativeElement;\n  }\n\n  ngDoCheck(): void {\n    this.checkValueUpdates();\n  }\n\n  ngOnDestroy(): void {\n    if (this.cellTemplate) {\n      this.cellTemplate.clear();\n    }\n  }\n\n  checkValueUpdates(): void {\n    let value = '';\n\n    if (!this.row || !this.column) {\n      value = '';\n    } else {\n      const val = this.column.$$valueGetter(this.row, this.column.prop);\n      const userPipe: PipeTransform = this.column.pipe;\n\n      if (userPipe) {\n        value = userPipe.transform(val);\n      } else if (value !== undefined) {\n        value = val;\n      }\n    }\n\n    if (this.value !== value) {\n      this.value = value;\n      this.cellContext.value = value;\n      this.sanitizedValue = value !== null && value !== undefined ? this.stripHtml(value) : value;\n      this.cd.markForCheck();\n    }\n  }\n\n  @HostListener('focus')\n  onFocus(): void {\n    this.isFocused = true;\n  }\n\n  @HostListener('blur')\n  onBlur(): void {\n    this.isFocused = false;\n  }\n\n  @HostListener('click', ['$event'])\n  onClick(event: MouseEvent): void {\n    this.activate.emit({\n      type: 'click',\n      event,\n      row: this.row,\n      group: this.group,\n      rowHeight: this.rowHeight,\n      column: this.column,\n      value: this.value,\n      cellElement: this._element\n    });\n  }\n\n  @HostListener('dblclick', ['$event'])\n  onDblClick(event: MouseEvent): void {\n    this.activate.emit({\n      type: 'dblclick',\n      event,\n      row: this.row,\n      group: this.group,\n      rowHeight: this.rowHeight,\n      column: this.column,\n      value: this.value,\n      cellElement: this._element\n    });\n  }\n\n  @HostListener('keydown', ['$event'])\n  onKeyDown(event: KeyboardEvent): void {\n    const keyCode = event.keyCode;\n    const isTargetCell = event.target === this._element;\n\n    const isAction =\n      keyCode === Keys.return ||\n      keyCode === Keys.down ||\n      keyCode === Keys.up ||\n      keyCode === Keys.left ||\n      keyCode === Keys.right;\n\n    if (isAction && isTargetCell) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.activate.emit({\n        type: 'keydown',\n        event,\n        row: this.row,\n        group: this.group,\n        rowHeight: this.rowHeight,\n        column: this.column,\n        value: this.value,\n        cellElement: this._element\n      });\n    }\n  }\n\n  onCheckboxChange(event: any): void {\n    this.activate.emit({\n      type: 'checkbox',\n      event,\n      row: this.row,\n      group: this.group,\n      rowHeight: this.rowHeight,\n      column: this.column,\n      value: this.value,\n      cellElement: this._element,\n      treeStatus: 'collapsed'\n    });\n  }\n\n  calcSortDir(sorts: any[]): any {\n    if (!sorts) {\n      return;\n    }\n\n    const sort = sorts.find((s: any) => {\n      return s.prop === this.column.prop;\n    });\n\n    if (sort) {\n      return sort.dir;\n    }\n  }\n\n  stripHtml(html: string): string {\n    if (!html.replace) {\n      return html;\n    }\n    return html.replace(/<\\/?[^>]+(>|$)/g, '');\n  }\n\n  onTreeAction() {\n    this.treeAction.emit(this.row);\n  }\n\n  calcLeftMargin(column: any, row: any) {\n    const levelIndent = column.treeLevelIndent != null ? column.treeLevelIndent : 50;\n    return column.isTreeColumn ? row.level * levelIndent : 0;\n  }\n}\n","export function selectRows(selected: any[], row: any, comparefn: any) {\n  const selectedIndex = comparefn(row, selected);\n\n  if (selectedIndex > -1) {\n    selected.splice(selectedIndex, 1);\n  } else {\n    selected.push(row);\n  }\n\n  return selected;\n}\n\nexport function selectRowsBetween(\n  selected: any[],\n  rows: any[],\n  index: number,\n  prevIndex: number,\n  comparefn: any\n): any[] {\n  const reverse = index < prevIndex;\n\n  for (let i = 0; i < rows.length; i++) {\n    const row = rows[i];\n    const greater = i >= prevIndex && i <= index;\n    const lesser = i <= prevIndex && i >= index;\n\n    let range = { start: 0, end: 0 };\n    if (reverse) {\n      range = {\n        start: index,\n        end: prevIndex\n      };\n    } else {\n      range = {\n        start: prevIndex,\n        end: index + 1\n      };\n    }\n\n    if ((reverse && lesser) || (!reverse && greater)) {\n      // if in the positive range to be added to `selected`, and\n      // not already in the selected array, add it\n      if (i >= range.start && i <= range.end) {\n        selected.push(row);\n      }\n    }\n  }\n\n  return selected;\n}\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport { SelectionType } from '../../types/selection.type';\nimport { selectRowsBetween, selectRows } from '../../utils/selection';\nimport { Keys } from '../../utils/keys';\n\nexport interface Model {\n  type: string;\n  event: MouseEvent | KeyboardEvent;\n  row: any;\n  rowElement: any;\n  cellElement: any;\n  cellIndex: number;\n}\n\n@Component({\n  selector: 'datatable-selection',\n  template: ` <ng-content></ng-content> `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableSelectionComponent {\n  @Input() rows: any[];\n  @Input() selected: any[];\n  @Input() selectEnabled: boolean;\n  @Input() selectionType: SelectionType;\n  @Input() rowIdentity: any;\n  @Input() selectCheck: any;\n\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n  @Output() select: EventEmitter<any> = new EventEmitter();\n\n  prevIndex: number;\n\n  selectRow(event: KeyboardEvent | MouseEvent, index: number, row: any): void {\n    if (!this.selectEnabled) return;\n\n    const chkbox = this.selectionType === SelectionType.checkbox;\n    const multi = this.selectionType === SelectionType.multi;\n    const multiClick = this.selectionType === SelectionType.multiClick;\n    let selected: any[] = [];\n\n    if (multi || chkbox || multiClick) {\n      if (event.shiftKey) {\n        selected = selectRowsBetween([], this.rows, index, this.prevIndex, this.getRowSelectedIdx.bind(this));\n      } else if (event.ctrlKey || event.metaKey || multiClick || chkbox) {\n        selected = selectRows([...this.selected], row, this.getRowSelectedIdx.bind(this));\n      } else {\n        selected = selectRows([], row, this.getRowSelectedIdx.bind(this));\n      }\n    } else {\n      selected = selectRows([], row, this.getRowSelectedIdx.bind(this));\n    }\n\n    if (typeof this.selectCheck === 'function') {\n      selected = selected.filter(this.selectCheck.bind(this));\n    }\n\n    this.selected.splice(0, this.selected.length);\n    this.selected.push(...selected);\n\n    this.prevIndex = index;\n\n    this.select.emit({\n      selected\n    });\n  }\n\n  onActivate(model: Model, index: number): void {\n    const { type, event, row } = model;\n    const chkbox = this.selectionType === SelectionType.checkbox;\n    const select = (!chkbox && (type === 'click' || type === 'dblclick')) || (chkbox && type === 'checkbox');\n\n    if (select) {\n      this.selectRow(event, index, row);\n    } else if (type === 'keydown') {\n      if ((<KeyboardEvent>event).keyCode === Keys.return) {\n        this.selectRow(event, index, row);\n      } else {\n        this.onKeyboardFocus(model);\n      }\n    }\n    this.activate.emit(model);\n  }\n\n  onKeyboardFocus(model: Model): void {\n    const { keyCode } = <KeyboardEvent>model.event;\n    const shouldFocus = keyCode === Keys.up || keyCode === Keys.down || keyCode === Keys.right || keyCode === Keys.left;\n\n    if (shouldFocus) {\n      const isCellSelection = this.selectionType === SelectionType.cell;\n\n      if (!model.cellElement || !isCellSelection) {\n        this.focusRow(model.rowElement, keyCode);\n      } else if (isCellSelection) {\n        this.focusCell(model.cellElement, model.rowElement, keyCode, model.cellIndex);\n      }\n    }\n  }\n\n  focusRow(rowElement: any, keyCode: number): void {\n    const nextRowElement = this.getPrevNextRow(rowElement, keyCode);\n    if (nextRowElement) nextRowElement.focus();\n  }\n\n  getPrevNextRow(rowElement: any, keyCode: number): any {\n    const parentElement = rowElement.parentElement;\n\n    if (parentElement) {\n      let focusElement: HTMLElement;\n      if (keyCode === Keys.up) {\n        focusElement = parentElement.previousElementSibling;\n      } else if (keyCode === Keys.down) {\n        focusElement = parentElement.nextElementSibling;\n      }\n\n      if (focusElement && focusElement.children.length) {\n        return focusElement.children[0];\n      }\n    }\n  }\n\n  focusCell(cellElement: any, rowElement: any, keyCode: number, cellIndex: number): void {\n    let nextCellElement: HTMLElement;\n\n    if (keyCode === Keys.left) {\n      nextCellElement = cellElement.previousElementSibling;\n    } else if (keyCode === Keys.right) {\n      nextCellElement = cellElement.nextElementSibling;\n    } else if (keyCode === Keys.up || keyCode === Keys.down) {\n      const nextRowElement = this.getPrevNextRow(rowElement, keyCode);\n      if (nextRowElement) {\n        const children = nextRowElement.getElementsByClassName('datatable-body-cell');\n        if (children.length) nextCellElement = children[cellIndex];\n      }\n    }\n\n    if (nextCellElement) nextCellElement.focus();\n  }\n\n  getRowSelected(row: any): boolean {\n    return this.getRowSelectedIdx(row, this.selected) > -1;\n  }\n\n  getRowSelectedIdx(row: any, selected: any[]): number {\n    if (!selected || !selected.length) return -1;\n\n    const rowId = this.rowIdentity(row);\n    return selected.findIndex(r => {\n      const id = this.rowIdentity(r);\n      return id === rowId;\n    });\n  }\n}\n","import { Component, Input, OnChanges, PipeTransform, TemplateRef } from '@angular/core';\n\nexport interface ISummaryColumn {\n  summaryFunc?: (cells: any[]) => any;\n  summaryTemplate?: TemplateRef<any>;\n\n  prop: string;\n  pipe?: PipeTransform;\n}\n\nfunction defaultSumFunc(cells: any[]): any {\n  const cellsWithValues = cells.filter(cell => !!cell);\n\n  if (!cellsWithValues.length) {\n    return null;\n  }\n  if (cellsWithValues.some(cell => typeof cell !== 'number')) {\n    return null;\n  }\n\n  return cellsWithValues.reduce((res, cell) => res + cell);\n}\n\nfunction noopSumFunc(cells: any[]): void {\n  return null;\n}\n\n@Component({\n  selector: 'datatable-summary-row',\n  template: `\n    <datatable-body-row\n      *ngIf=\"summaryRow && _internalColumns\"\n      tabindex=\"-1\"\n      [innerWidth]=\"innerWidth\"\n      [offsetX]=\"offsetX\"\n      [columns]=\"_internalColumns\"\n      [rowHeight]=\"rowHeight\"\n      [row]=\"summaryRow\"\n      [rowIndex]=\"-1\"\n    >\n    </datatable-body-row>\n  `,\n  host: {\n    class: 'datatable-summary-row'\n  }\n})\nexport class DataTableSummaryRowComponent implements OnChanges {\n  @Input() rows: any[];\n  @Input() columns: ISummaryColumn[];\n\n  @Input() rowHeight: number;\n  @Input() offsetX: number;\n  @Input() innerWidth: number;\n\n  _internalColumns: ISummaryColumn[];\n  summaryRow: any = {};\n\n  ngOnChanges() {\n    if (!this.columns || !this.rows) {\n      return;\n    }\n    this.updateInternalColumns();\n    this.updateValues();\n  }\n\n  private updateInternalColumns() {\n    this._internalColumns = this.columns.map(col => ({\n      ...col,\n      cellTemplate: col.summaryTemplate\n    }));\n  }\n\n  private updateValues() {\n    this.summaryRow = {};\n\n    this.columns\n      .filter(col => !col.summaryTemplate)\n      .forEach(col => {\n        const cellsFromSingleColumn = this.rows.map(row => row[col.prop]);\n        const sumFunc = this.getSummaryFunction(col);\n\n        this.summaryRow[col.prop] = col.pipe\n          ? col.pipe.transform(sumFunc(cellsFromSingleColumn))\n          : sumFunc(cellsFromSingleColumn);\n      });\n  }\n\n  private getSummaryFunction(column: ISummaryColumn): (a: any[]) => any {\n    if (column.summaryFunc === undefined) {\n      return defaultSumFunc;\n    } else if (column.summaryFunc === null) {\n      return noopSumFunc;\n    } else {\n      return column.summaryFunc;\n    }\n  }\n}\n","export enum ClickType {\n  single = 'single',\n  double = 'double'\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ScrollbarHelper } from './services/scrollbar-helper.service';\nimport { DimensionsHelper } from './services/dimensions-helper.service';\nimport { ColumnChangesService } from './services/column-changes.service';\nimport { DataTableFooterTemplateDirective } from './components/footer/footer-template.directive';\nimport { VisibilityDirective } from './directives/visibility.directive';\nimport { DraggableDirective } from './directives/draggable.directive';\nimport { ResizeableDirective } from './directives/resizeable.directive';\nimport { OrderableDirective } from './directives/orderable.directive';\nimport { LongPressDirective } from './directives/long-press.directive';\nimport { ScrollerComponent } from './components/body/scroller.component';\nimport { DatatableComponent } from './components/datatable.component';\nimport { DataTableColumnDirective } from './components/columns/column.directive';\nimport { DataTableHeaderComponent } from './components/header/header.component';\nimport { DataTableHeaderCellComponent } from './components/header/header-cell.component';\nimport { DataTableBodyComponent } from './components/body/body.component';\nimport { DataTableFooterComponent } from './components/footer/footer.component';\nimport { DataTablePagerComponent } from './components/footer/pager.component';\nimport { ProgressBarComponent } from './components/body/progress-bar.component';\nimport { DataTableBodyRowComponent } from './components/body/body-row.component';\nimport { DataTableRowWrapperComponent } from './components/body/body-row-wrapper.component';\nimport { DatatableRowDetailDirective } from './components/row-detail/row-detail.directive';\nimport { DatatableGroupHeaderDirective } from './components/body/body-group-header.directive';\nimport { DatatableRowDetailTemplateDirective } from './components/row-detail/row-detail-template.directive';\nimport { DataTableBodyCellComponent } from './components/body/body-cell.component';\nimport { DataTableSelectionComponent } from './components/body/selection.component';\nimport { DataTableColumnHeaderDirective } from './components/columns/column-header.directive';\nimport { DataTableColumnCellDirective } from './components/columns/column-cell.directive';\nimport { DataTableColumnCellTreeToggle } from './components/columns/tree.directive';\nimport { DatatableFooterDirective } from './components/footer/footer.directive';\nimport { DatatableGroupHeaderTemplateDirective } from './components/body/body-group-header-template.directive';\nimport { DataTableSummaryRowComponent } from './components/body/summary/summary-row.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [ScrollbarHelper, DimensionsHelper, ColumnChangesService],\n  declarations: [\n    DataTableFooterTemplateDirective,\n    VisibilityDirective,\n    DraggableDirective,\n    ResizeableDirective,\n    OrderableDirective,\n    LongPressDirective,\n    ScrollerComponent,\n    DatatableComponent,\n    DataTableColumnDirective,\n    DataTableHeaderComponent,\n    DataTableHeaderCellComponent,\n    DataTableBodyComponent,\n    DataTableFooterComponent,\n    DataTablePagerComponent,\n    ProgressBarComponent,\n    DataTableBodyRowComponent,\n    DataTableRowWrapperComponent,\n    DatatableRowDetailDirective,\n    DatatableGroupHeaderDirective,\n    DatatableRowDetailTemplateDirective,\n    DataTableBodyCellComponent,\n    DataTableSelectionComponent,\n    DataTableColumnHeaderDirective,\n    DataTableColumnCellDirective,\n    DataTableColumnCellTreeToggle,\n    DatatableFooterDirective,\n    DatatableGroupHeaderTemplateDirective,\n    DataTableSummaryRowComponent\n  ],\n  exports: [\n    DatatableComponent,\n    DatatableRowDetailDirective,\n    DatatableGroupHeaderDirective,\n    DatatableRowDetailTemplateDirective,\n    DataTableColumnDirective,\n    DataTableColumnHeaderDirective,\n    DataTableColumnCellDirective,\n    DataTableColumnCellTreeToggle,\n    DataTableFooterTemplateDirective,\n    DatatableFooterDirective,\n    DataTablePagerComponent,\n    DatatableGroupHeaderTemplateDirective\n  ]\n})\nexport class NgxDatatableModule {\n  /**\n   * Configure global configuration via INgxDatatableConfig\n   * @param configuration\n   */\n  static forRoot(configuration: INgxDatatableConfig): ModuleWithProviders<NgxDatatableModule> {\n    return {\n      ngModule: NgxDatatableModule,\n      providers: [{ provide: 'configuration', useValue: configuration }]\n    };\n  }\n}\n\n/**\n * Interface definition for INgxDatatableConfig global configuration\n */\nexport interface INgxDatatableConfig {\n  messages: {\n    emptyMessage: string; // Message to show when array is presented, but contains no values\n    totalMessage: string; // Footer total message\n    selectedMessage: string; // Footer selected message\n  };\n}\n","if (typeof document !== 'undefined' && !document.elementsFromPoint) {\n  document.elementsFromPoint = elementsFromPoint;\n}\n\n/*tslint:disable*/\n/**\n * Polyfill for `elementsFromPoint`\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/elementsFromPoint\n * https://gist.github.com/iddan/54d5d9e58311b0495a91bf06de661380\n * https://gist.github.com/oslego/7265412\n */\nexport function elementsFromPoint(x: number, y: number) {\n  const elements = [];\n  const previousPointerEvents = [];\n  let current: any; // TODO: window.getComputedStyle should be used with inferred type (Element)\n  let i;\n  let d;\n\n  //if (document === undefined) return elements;\n\n  // get all elements via elementFromPoint, and remove them from hit-testing in order\n  while ((current = document.elementFromPoint(x, y)) && elements.indexOf(current) === -1 && current != null) {\n    // push the element and its current style\n    elements.push(current);\n    previousPointerEvents.push({\n      value: current.style.getPropertyValue('pointer-events'),\n      priority: current.style.getPropertyPriority('pointer-events')\n    });\n\n    // add \"pointer-events: none\", to get to the underlying element\n    current.style.setProperty('pointer-events', 'none', 'important');\n  }\n\n  // restore the previous pointer-events values\n  for (i = previousPointerEvents.length; (d = previousPointerEvents[--i]); ) {\n    elements[i].style.setProperty('pointer-events', d.value ? d.value : '', d.priority);\n  }\n\n  // return our results\n  return elements;\n}\n/*tslint:enable*/\n"]}